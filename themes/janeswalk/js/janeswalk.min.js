!function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){e.exports=a(1)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function i(){var e=document.getElementById("ccm-toolbar");e&&window.addEventListener("keyup",function(t){if("INPUT"!==t.target.tagName)switch(t.preventDefault(),String(t.key||t.keyCode&&String.fromCharCode(t.keyCode)||t["char"]).toUpperCase()){case"M":"block"!==e.style.display&&e.style.display?e.style.display="block":e.style.display="none"}})}function l(){var e=document.getElementById("navbar");e&&React.render(React.createElement(R["default"],null),e),React.render(React.createElement(S["default"],{socialLogin:(JanesWalk.stacks||{"Social Logins":""})["Social Logins"]}),document.getElementById("modals"))}function o(){JanesWalk.event.on("area.receive",function(e){return m.receive(e)}),JanesWalk.event.on("user.receive",function(e,t){return d.receive(e,t)}),JanesWalk.event.on("users.receive",function(e){return d.receiveAll(e)}),JanesWalk.event.on("walk.receive",function(e){return h.receive(e)}),JanesWalk.event.on("walks.receive",function(e){return h.receiveAll(e)}),JanesWalk.event.on("city.receive",function(e){return v.receive(e)}),JanesWalk.event.on("itineraries.receive",function(e){return g.receiveAll(e)})}function c(){JanesWalk.event.on("walkpage.load",function(e){var t=e.walk,a=e.city;h.receive(t),React.render(React.createElement(C["default"],{city:a,page:JanesWalk.page,walk:t}),document.getElementById("page"))}),JanesWalk.event.on("profilepage.load",function(e){React.render(React.createElement(P["default"],e),document.getElementById("page"))}),JanesWalk.event.on("caw.load",function(e){React.render(React.createElement(N["default"],{data:JanesWalk.walk.data,city:JanesWalk.city,user:JanesWalk.user,url:JanesWalk.walk.url,valt:JanesWalk.form.valt}),document.getElementById("page"))})}var s=a(2),u=a(9),m=r(u),f=a(10),d=r(f),p=a(11),h=r(p),y=a(12),v=r(y),b=a(13),g=r(b),E=a(14),R=n(E),k=a(27),w=r(k),_=a(31),N=n(_),T=a(54),C=n(T),O=a(67),P=n(O),j=a(80),S=n(j);document.addEventListener("DOMContentLoaded",function(){(0,s.getTranslations)(JanesWalk.locale),l(),o(),c(),i(),w.startPolling(),JanesWalk.event.activate()})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.translation){var t=window.sessionStorage.getItem("i18n_"+e.name);if(t)l["default"].receive(JSON.parse(t).translations[""]);else{var a=new XMLHttpRequest;a.open("get",e.translation,!0),a.onload=function(){var t=JSON.parse(this.responseText);window.sessionStorage.setItem("i18n_"+e.name,this.responseText),l["default"].receive(t.translations[""])},a.send()}}}Object.defineProperty(t,"__esModule",{value:!0}),t.getTranslations=r;var i=a(3),l=n(i)},function(e,t,a){"use strict";function n(e){(0,r.dispatch)({type:i.ActionTypes.I18N_RECEIVE,translations:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.receive=n;var r=a(4),i=a(8)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispatch=t.register=void 0;var n=a(5),r=new n.Dispatcher,i=r.register.bind(r),l=r.dispatch.bind(r);t["default"]=r,t.register=i,t.dispatch=l},function(e,t,a){"use strict";e.exports.Dispatcher=a(6)},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var r=a(7),i="ID_",l=function(){function e(){n(this,e),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}return e.prototype.register=function(e){var t=i+this._lastID++;return this._callbacks[t]=e,t},e.prototype.unregister=function(e){this._callbacks[e]?void 0:r(!1),delete this._callbacks[e]},e.prototype.waitFor=function(e){this._isDispatching?void 0:r(!1);for(var t=0;t<e.length;t++){var a=e[t];this._isPending[a]?this._isHandled[a]?void 0:r(!1):(this._callbacks[a]?void 0:r(!1),this._invokeCallback(a))}},e.prototype.dispatch=function(e){this._isDispatching?r(!1):void 0,this._startDispatching(e);try{for(var t in this._callbacks)this._isPending[t]||this._invokeCallback(t)}finally{this._stopDispatching()}},e.prototype.isDispatching=function(){return this._isDispatching},e.prototype._invokeCallback=function(e){this._isPending[e]=!0,this._callbacks[e](this._pendingPayload),this._isHandled[e]=!0},e.prototype._startDispatching=function(e){for(var t in this._callbacks)this._isPending[t]=!1,this._isHandled[t]=!1;this._pendingPayload=e,this._isDispatching=!0},e.prototype._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},e}();e.exports=l},function(e,t,a){"use strict";var n=function(e,t,a,n,r,i,l,o){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[a,n,r,i,l,o],u=0;c=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return s[u++]}))}throw c.framesToPop=1,c}};e.exports=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=["I18N_RECEIVE","WALK_RECEIVE","WALK_RECEIVE_ALL","WALK_SAVE","WALK_PUBLISH","CITY_RECEIVE","AREA_RECEIVE","USER_RECEIVE","USER_RECEIVE_ALL","ITINERARY_RECEIVE","ITINERARY_REMOVE_WALK","ITINERARY_ADD_WALK","ITINERARY_UPDATE_TITLE","ITINERARY_UPDATE_DESCRIPTION","ITINERARY_CREATE_LIST","ITINERARY_RECEIVE_ALL","ITINERARY_SYNC_START","ITINERARY_SYNC_END"].reduce(function(e,t){return e[t]=t,e},{});t.ActionTypes=a},function(e,t,a){"use strict";function n(e){Object.keys(e).forEach(function(t){(0,r.dispatch)({type:i.ActionTypes.AREA_RECEIVE,name:t,content:e[t]})})}Object.defineProperty(t,"__esModule",{value:!0}),t.receive=n;var r=a(4),i=a(8)},function(e,t,a){"use strict";function n(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.current,n=t.profile;(0,i.dispatch)({type:l.ActionTypes.USER_RECEIVE,user:e,current:a,profile:n})}function r(e){(0,i.dispatch)({type:l.ActionTypes.USER_RECEIVE_ALL,users:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.receive=n,t.receiveAll=r;var i=a(4),l=a(8)},function(e,t,a){"use strict";function n(e){(0,i.dispatch)({type:l.ActionTypes.WALK_RECEIVE,walk:e})}function r(e){(0,i.dispatch)({type:l.ActionTypes.WALK_RECEIVE_ALL,walks:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.receive=n,t.receiveAll=r;var i=a(4),l=a(8)},function(e,t,a){"use strict";function n(e){(0,r.dispatch)({type:i.ActionTypes.CITY_RECEIVE,city:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.receive=n;var r=a(4),i=a(8)},function(e,t,a){"use strict";function n(e,t,a){(0,m.dispatch)({type:u.ActionTypes.ITINERARY_REMOVE_WALK,list:e,walk:t,time:a})}function r(e,t,a){(0,m.dispatch)({type:u.ActionTypes.ITINERARY_ADD_WALK,list:e,walk:t,time:a})}function i(e,t){(0,m.dispatch)({type:u.ActionTypes.ITINERARY_UPDATE_TITLE,title:t,list:e})}function l(e,t){(0,m.dispatch)({type:u.ActionTypes.ITINERARY_UPDATE_DESCRIPTION,description:t,list:e})}function o(e,t){(0,m.dispatch)({type:u.ActionTypes.ITINERARY_CREATE_LIST,title:e,description:t})}function c(e){(0,m.dispatch)({type:u.ActionTypes.ITINERARY_RECEIVE_ALL,itineraries:e})}function s(e){(0,m.dispatch)({type:u.ActionTypes.ITINERARY_SYNC_END,start:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.remove=n,t.add=r,t.updateTitle=i,t.updateDescription=l,t.createList=o,t.receiveAll=c,t.syncEnd=s;var u=a(8),m=a(4)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(){return{options:d["default"].getArea("Left Header"),dropdown:d["default"].getArea("Dropdown"),user:h["default"].getCurrent(),itinerary:v["default"].getLists(),totalWalks:v["default"].totalWalks()}}function c(e,t){var a=document.createElement("div");a.innerHTML=e,[].forEach.call(a.children,function(e){return t.parentNode.appendChild(e)})}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=a(15),m=n(u),f=a(28),d=n(f),p=a(29),h=n(p),y=a(16),v=n(y),b=a(30),g=a(20),E=function(e,t){return t},R=function(e){var t=e.user,a=e.profiling,n=e.searching,r=e.toggleProfile,i=e.toggleSearch,l=e.unseenUpdates;return[React.createElement("li",{key:"in0"},React.createElement("a",{onClick:i,className:n?"selected":""},React.createElement("i",{className:"fa fa-search"}))),React.createElement("li",{key:"in1",className:l?"notify":""},React.createElement("a",{onClick:r,className:a?"selected":""},React.createElement("i",{className:"fa fa-calendar"}))),React.createElement("li",{key:"in2"},React.createElement("a",{href:"/profile"},t.firstName||t.name)),React.createElement("li",{key:"in3"},React.createElement("a",{href:"/login/logout"},(0,g.t)("Logout")))]},k=function(e){var t=e.searching,a=e.toggleSearch;return[React.createElement("li",{key:"out0"},React.createElement("a",{onClick:a,className:t?"selected":""},React.createElement("i",{className:"fa fa-search"}))),React.createElement("li",{key:"out1"},React.createElement("a",{href:"/register"},E("Register on a website","Join"))),React.createElement("li",{key:"out2"},React.createElement("a",{onClick:function(){return $("#login").modal()}},(0,g.t)("Log in")))]},w=function(e){function t(){var e;r(this,t);for(var a=arguments.length,n=Array(a),l=0;a>l;l++)n[l]=arguments[l];var c=i(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return c.state=o(),c.state.lastSize=v["default"].totalWalks(),c._onChange=c._onChange.bind(c),c}return l(t,e),s(t,[{key:"componentWillMount",value:function(){d["default"].addChangeListener(this._onChange),h["default"].addChangeListener(this._onChange)}},{key:"componentWillUnmount",value:function(){d["default"].removeChangeListener(this._onChage),h["default"].removeChangeListener(this._onChage)}},{key:"_onChange",value:function(){this.setState(o)}},{key:"componentDidMount",value:function(){c(this.state.options,this.refs.topnav),(0,b.makeSticky)(React.findDOMNode(this),this.refs.header)}},{key:"componentWillUpdate",value:function(e,t){var a=t.options,n=(t.dropdown,t.searching);a&&a!==this.state.options&&c(a,this.refs.topnav),!this.state.searching&&n&&this.openSearch()}},{key:"_addNavEvents",value:function(){this._element.find("a.search-open").click(function(){$("body > header").addClass("dropped")}),this._element.find("a.search-close").click(function(){$("body > header").removeClass("dropped")})}},{key:"openSearch",value:function(){$("html, body").animate({scrollTop:0},300)}},{key:"render",value:function(){var e=this,t=this.props.editMode,a=this.state,n=a.user,r=a.searching,i=a.profiling,l=(a.itinerary,a.totalWalks),o=void 0,c={searching:r,toggleSearch:function(){return e.setState({searching:!e.state.searching})}};return o=n?R(Object.assign({user:n,profiling:i,unseenUpdates:this.state.lastSize!==l,toggleProfile:function(){return e.setState({profiling:!e.state.profiling,lastSize:l})}},c)):k(c),React.createElement("div",null,React.createElement("header",{ref:"header",className:[t?"edit":"",r?"dropped":""].join(" ")},React.createElement("nav",{role:"navigation"},React.createElement("a",{href:"/",className:"logo"},React.createElement("span",null)),React.createElement("ul",{className:"nav",ref:"topnav"},o,React.createElement("li",null,React.createElement("a",{href:"/donate",id:"donate"},"Donate")))),React.createElement("div",{className:"navbar-outer",dangerouslySetInnerHTML:{__html:this.state.dropdown}})),React.createElement("div",{id:"modals"},i?React.createElement(m["default"],{onClose:function(){return e.setState({profiling:!e.state.profiling})}}):null))}}]),t}(React.Component);t["default"]=w,w.defaultProps={editMode:CCM_EDIT_MODE}},function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var s=a(16),u=r(s),m=a(19),f=r(m),d=a(13),p=a(20),h=a(22),y=r(h),v=a(25),b=r(v),g=a(26),E=r(g),R=a(27),k=(n(R),function(){var e=arguments.length<=0||void 0===arguments[0]?u["default"].getItineraryList():arguments[0];return{activeList:e,lists:u["default"].getLists(),itinerary:u["default"].getItineraryList()}}),w=function(e){function t(e){var a;i(this,t);for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;n>o;o++)r[o-1]=arguments[o];var c=l(this,(a=Object.getPrototypeOf(t)).call.apply(a,[this,e].concat(r)));return c.state=Object.assign({},k(),e.itinerary),c._onChange=c._onChange.bind(c),c}return o(t,e),c(t,[{key:"componentWillMount",value:function(){u["default"].addChangeListener(this._onChange),f["default"].addChangeListener(this._onChange)}},{key:"componentWillUnmount",value:function(){u["default"].removeChangeListener(this._onChange),f["default"].removeChangeListener(this._onChange)}},{key:"componentDidMount",value:function(){var e=this,t=$(React.findDOMNode(this));t.modal(),t.on("hidden.bs.modal",function(){return e.props.onClose()}),this.setState({$el:t})}},{key:"_onChange",value:function(){var e=this;this.setState(function(){return k(e.state.activeList)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.activeList,n=t.lists,r=t.$el,i=t.itinerary,l=[];return a.walks.forEach(function(e,t){t=t[0]||t,l.push(React.createElement(y["default"],{key:t.id,list:a,lists:n,walk:t,onAdd:function(e,a){return(0,d.add)(e,t,a)},onRemove:function(e,a){return(0,d.remove)(e,t,a)},itinerary:i}))}),React.createElement("dialog",{open:!0},React.createElement("section",{id:"itinerary"},React.createElement("i",{className:"close fa fa-times",onClick:function(){return r.modal("hide")}}),React.createElement(E["default"],{lists:n,activeList:a,onChoose:function(t){return e.setState({activeList:t})},onCreate:function(){return(0,d.createList)((0,p.t)("New Itinerary"))}}),React.createElement("div",{className:"itinerary"},React.createElement("section",null,React.createElement(b["default"],{onChangeDescription:function(e){return(0,d.updateDescription)(a,e)},onChangeTitle:function(e){return(0,d.updateTitle)(a,e)},list:a})),React.createElement("ul",null,l)),React.createElement("p",{className:"knightFdn-itinerary"},"Powered by the Knight Foundation")))}}]),t}(React.Component);t["default"]=w,w.defaultProps={itinerary:null},w.propTypes={itinerary:React.PropTypes.array.isRequired}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var r=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&o["return"]&&o["return"]()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(t,"__esModule",{value:!0});var i=a(4),l=a(17),o=a(8),c=a(18),s=a(19),u=n(s),m="change",f=new Set,d=Date.now(),p=function(e,t){var a=arguments.length<=2||void 0===arguments[2]?null:arguments[2];if(a){var n=e.walks.get(t),r=(0,c.startTimeIndex)(n,a);r>=0&&(n.splice(r,1),e.walks.set(t,n))}else e.walks["delete"](t)},h=function(e,t){var a=arguments.length<=2||void 0===arguments[2]?null:arguments[2];if(a){var n=e.walks.get(t),r=(0,c.startTimeIndex)(n,a);-1===r&&(n.push(a),e.walks.set(t,n))}else e.walks.set(t)},y=function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=arguments.length<=1||void 0===arguments[1]?"":arguments[1],a={title:e,walks:new Set,description:t,shareUrl:""};return f.add(a),a},v=function(e){e.forEach(function(e,t){var a=e.times||[];f.add(Object.assign({},e,{walks:new Map(e.walks.map(function(e,t){return[u["default"].getWalk(+e),a[t]||[]]}))}))})},b=function(e,t){e.title=t},g=function(e,t){e.description=t},E=Object.assign({},l.EventEmitter.prototype,{emitChange:function(){this.emit(m)},addChangeListener:function(e){this.on(m,e)},removeChangeListener:function(e){this.removeListener(m,e)},getLists:function(){return f},getItineraryList:function(){var e=r(f,1),t=e[0];return t},getFavouriteList:function(){var e=r(f,2),t=(e[0],e[1]);return t},getWalks:function(e){return e.walks},getLastChange:function(){return d},totalWalks:function(){var e=0;return f.forEach(function(t){return e+=t.walks.size}),e},dispatcherIndex:(0,i.register)(function(e){var t=e.list,a=e.walk,n=e.time;switch(e.type){case o.ActionTypes.ITINERARY_REMOVE_WALK:d=Date.now(),p(t,a,n);break;case o.ActionTypes.ITINERARY_ADD_WALK:d=Date.now(),h(t,a,n);break;case o.ActionTypes.ITINERARY_UPDATE_TITLE:d=Date.now(),b(t,e.title);break;case o.ActionTypes.ITINERARY_UPDATE_DESCRIPTION:d=Date.now(),g(t,e.description);break;case o.ActionTypes.ITINERARY_CREATE_LIST:d=Date.now(),y(e.title,e.description);break;case o.ActionTypes.ITINERARY_RECEIVE_ALL:v(e.itineraries)}E.emitChange()})});t["default"]=E},function(e,t){"use strict";function a(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function l(e){return"object"===("undefined"==typeof e?"undefined":a(e))&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,a,n,i,c,s;if(this._events||(this._events={}),"error"===e&&(!this._events.error||l(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(a=this._events[e],o(a))return!1;if(r(a))switch(arguments.length){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),a.apply(this,i)}else if(l(a))for(i=Array.prototype.slice.call(arguments,1),s=a.slice(),n=s.length,c=0;n>c;c++)s[c].apply(this,i);return!0},n.prototype.addListener=function(e,t){var a;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?l(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,l(this._events[e])&&!this._events[e].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,a&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function a(){this.removeListener(e,a),n||(n=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var n=!1;return a.listener=t,this.on(e,a),this},n.prototype.removeListener=function(e,t){var a,n,i,o;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=this._events[e],i=a.length,n=-1,a===t||r(a.listener)&&a.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(l(a)){for(o=i;o-- >0;)if(a[o]===t||a[o].listener&&a[o].listener===t){n=o;break}if(0>n)return this;1===a.length?(a.length=0,delete this._events[e]):a.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,a;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(a=this._events[e],r(a))this.removeListener(e,a);else if(a)for(;a.length;)this.removeListener(e,a[a.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){"use strict";function a(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function n(e){if(l)return l.format(e);var t=new Date(e),a=t.toUTCString();return a.slice(0,a.indexOf(" GMT"))}function r(e){var t=o[e],a=void 0;return e?t?t:(a=n(1e3*e),o[e]=a,a):e}function i(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],t=arguments[1];return e.findIndex(function(e){return e[0]===t[0]&&e[1]===t[1]})}Object.defineProperty(t,"__esModule",{value:!0}),t.dateFormatted=r,t.startTimeIndex=i;var l=void 0;"object"===("undefined"==typeof Intl?"undefined":a(Intl))&&(l=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",timeZone:"UTC"}));var o={}},function(e,t,a){"use strict";function n(e){s.set(+e.id,e)}function r(e){e.forEach(function(e){return n(e)})}Object.defineProperty(t,"__esModule",{value:!0});var i=a(4),l=a(17),o=a(8),c="change",s=new Map,u=Object.assign({},l.EventEmitter.prototype,{emitChange:function(){this.emit(c)},addChangeListener:function(e){this.on(c,e)},removeChangeListener:function(e){this.removeListener(c,e)},getWalks:function(){return s},getWalk:function(e){return s.get(+e)},dispatchToken:(0,i.register)(function(e){switch(e.type){case o.ActionTypes.WALK_RECEIVE:n(e.walk);break;case o.ActionTypes.WALK_RECEIVE_ALL:r(e.walks)}u.emitChange()})});t["default"]=u},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.t2=t.t=void 0;var r=a(17),i=a(4),l=a(8),o=a(21),c=n(o),s="change",u=new c["default"],m=Object.assign({},r.EventEmitter.prototype,{emitChange:function(){this.emit(s)},addChangeListener:function(e){this.on(s,e)},getTranslate:function(){return u.translate.bind(u)},getTranslatePlural:function(){return u.translatePlural.bind(u)}});m.dispatchToken=(0,i.register)(function(e){switch(e.type){case l.ActionTypes.I18N_RECEIVE:u.constructor(e.translations),m.emitChange()}}),t["default"]=m;t.t=u.translate.bind(u),t.t2=u.translatePlural.bind(u)},function(e,t){"use strict";function a(e){var t=Array.prototype.slice.call(arguments);return t.shift().replace(/%(s|d)/g,function(){return t.shift()})}function n(e){e&&(this.translations=e)}Object.defineProperties(n.prototype,{translations:{value:{},writable:!0,enumerable:!0},translate:{value:function(e){var t=Array.prototype.slice.call(arguments);return t[0]=(this.translations[e]||[e])[0],a.apply(this,t)}},translatePlural:{value:function(e,t,n){var r=1!==n?1:0,i=(this.translations[e+"_"+t]||[e,t])[r];return a(i,n)}},translateContext:{value:function(e,t){var n=Array.prototype.slice.call(arguments,2);a.apply(this,[e,n])}}}),e.exports=n},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var c=a(23),s=n(c),u=a(24),m=n(u),f=function(e){function t(){var e;r(this,t);for(var a=arguments.length,n=Array(a),l=0;a>l;l++)n[l]=arguments[l];var o=i(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return o.state={dialogOpen:!1},o}return l(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.list;t!==this.props.list&&this.setState({dialogOpen:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.walk,n=t.list,r=t.lists,i=t.onAdd,l=t.onRemove,o=t.itinerary,c=this.state.dialogOpen,u=a.title,f=a.url,d=a.map,p=a.time,h=void 0;return d&&d.markers[0]&&(h=d.markers[0].title),React.createElement("li",{className:"walklistItem"},React.createElement("div",{className:"walk"},React.createElement("h3",null,React.createElement("a",{href:f},u)),React.createElement("h4",null,h),React.createElement(m["default"],{itinerary:o,time:p,walk:a,onAdd:i,onRemove:l})),React.createElement("button",{className:"action removeWalk",onClick:function(){return l(n)}}),React.createElement("button",{className:"action addWalk "+(c?"selected":""),onClick:function(){return e.setState({dialogOpen:!c})}}),c?React.createElement(s["default"],{lists:r,walk:a,list:n,onAdd:i,onRemove:l}):null)}}]),t}(React.Component);f.propTypes={title:React.PropTypes.string,time:React.PropTypes.number,meeting:React.PropTypes.string,id:React.PropTypes.number.isRequired,remove:React.PropTypes.func.isRequired},f.defaultProps={title:"Walk Title",time:{slots:[Date.now(),Date.now()]},remove:null},t["default"]=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(a(20),function(e){var t=e.lists,a=e.walk,n=e.list,r=e.onAdd,i=e.onRemove,l=[],o=!0,c=!1,s=void 0;try{for(var u,m=function(){var e=u.value;if(n!==e){var t=e.id,o=e.title,c=e.walks,s=c.has(a),m=void 0;m=s?function(){return i(e)}:function(){return r(e)},l.push(React.createElement("li",{key:t},React.createElement("a",{onClick:m,className:s?"selected":""},o)))}},f=t[Symbol.iterator]();!(o=(u=f.next()).done);o=!0)m()}catch(d){c=!0,s=d}finally{try{!o&&f["return"]&&f["return"]()}finally{if(c)throw s}}return React.createElement("div",{id:"addWalk",className:"add-walk-to-list"},React.createElement("ul",null,l))});n.propTypes={lists:React.PropTypes.instanceOf(Set)},t["default"]=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(18),r=function(e){var t=e.itinerary,a=e.time,r=e.walk,i=e.onAdd,l=e.onRemove,o=[];return t&&a&&a.slots&&(t.walks.has(r)?!function(){var e=t.walks.get(r);o=a.slots.map(function(a){return-1==(0,n.startTimeIndex)(e,a)?React.createElement("h4",null,(0,n.dateFormatted)(a[0]),React.createElement("button",{className:"addItinerary",onClick:function(){return i(t,a)}})):React.createElement("h4",null,(0,n.dateFormatted)(a[0]),React.createElement("button",{className:"removeItinerary",onClick:function(){return l(t,a)}}))})}():a&&a.slots[0]&&(o=a.slots.map(function(e){return React.createElement("h4",null,(0,n.dateFormatted)(e[0]),React.createElement("button",{className:"addItinerary",onClick:function(){return i(t,e)}}))}))),React.createElement("section",null,o)};t["default"]=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(20),r=function(e){var t=e.list,a=e.onChangeTitle,r=e.onChangeDescription;return React.createElement("header",{className:"itineraryHeader"},React.createElement("h2",null,React.createElement("input",{type:"text",required:"required",value:t.title,placeholder:(0,n.t)("My Itinerary's Title"),onChange:function(e){return a(e.target.value)}})),(t.shareUrl,null),React.createElement("h4",{className:"walklistDescription"},React.createElement("textarea",{required:"required",value:t.description,placeholder:(0,n.t)("Tell people about it! Start typing here to give your list some commentary."),onChange:function(e){return r(e.target.value)}})))};r.propTypes={title:React.PropTypes.string,description:React.PropTypes.string},t["default"]=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(a(13),a(20)),r=function(e){var t=e.lists,a=e.activeList,r=e.onChoose,i=e.onCreate,l=[];return t.forEach(function(e){return l.push(React.createElement("li",{key:e.id},React.createElement("a",{className:a===e?"selected":"",onClick:function(){return r(e)}},e.title," (",e.walks.size,")")))}),React.createElement("dialog",{id:"itinerary-select",className:"static-list"},React.createElement("ul",null,l),React.createElement("button",{onClick:i},React.createElement("i",{className:"fa fa-plus"})," ",(0,n.t)("New List")))};t["default"]=r},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){return Array.isArray(e)?e:Array.from(e)}function i(e){var t=r(e),a=t;return JSON.stringify(a.map(function(e){var t=[],a=[],n={};return e.walks.forEach(function(e,n){t.push(+n.id),e&&a.push(e)}),a.length&&(n.times=a),n.walks=t,Object.assign({},e,n)}))}function l(e){var t=arguments.length<=1||void 0===arguments[1]?f:arguments[1],a=new XMLHttpRequest;a.open("POST",t),a.onload=function(){var a=void 0;try{a=JSON.parse(this.responseText),console.log(a),e()}catch(n){console.log("Error parsing JSON returned on itinerary"+t)}},a.onerror=function(){console.log("Failed to update itinerary.")},a.send(i(u["default"].getLists()))}function o(){var e=arguments.length<=0||void 0===arguments[0]?f:arguments[0],t=new XMLHttpRequest;t.open("GET",e),t.onload=function(){var t=void 0;try{t=JSON.parse(this.responseText),(0,m.receiveAll)(t)}catch(a){cb("Error parsing JSON returned on itinerary"+e)}},t.onerror=function(){console.log("Failed to update itinerary.")},t.send()}function c(){var e=arguments.length<=0||void 0===arguments[0]?100:arguments[0],t=u["default"].getLastChange(),a=!1;setInterval(function(){var n=u["default"].getLastChange();Date.now()-n>3*e&&n>t&&!a&&(a=!0,l(function(){t=Date.now(),a=!1}))},e)}Object.defineProperty(t,"__esModule",{value:!0}),t.post=l,t.get=o,t.startPolling=c;var s=a(16),u=n(s),m=a(13),f="/profile/itineraries";
},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(4),r=a(17),i=a(8),l="change",o={},c=Object.assign({},r.EventEmitter.prototype,{emitChange:function(){this.emit(l)},addChangeListener:function(e){this.on(l,e)},removeChangeListener:function(e){this.removeListener(l,e)},getAreas:function(){return o},getArea:function(e){return o[e]},dispatcherIndex:(0,n.register)(function(e){switch(e.type){case i.ActionTypes.AREA_RECEIVE:o[e.name]=e.content}c.emitChange()})});t["default"]=c},function(e,t,a){"use strict";function n(e,t){var a=t.current;s.set(+e.id,e),a&&(u=e)}function r(e){e.forEach(function(e){return n(e,{})})}Object.defineProperty(t,"__esModule",{value:!0});var i=a(4),l=a(17),o=a(8),c="change",s=new Map,u=void 0,m=Object.assign({},l.EventEmitter.prototype,{emitChange:function(){this.emit(c)},addChangeListener:function(e){this.on(c,e)},removeChangeListener:function(e){this.removeListener(c,e)},getUsers:function(){return s},getCurrent:function(){return u},dispatchToken:(0,i.register)(function(e){switch(e.type){case o.ActionTypes.USER_RECEIVE:n(e.user,{current:e.current,profile:e.profile});break;case o.ActionTypes.USER_RECEIVE_ALL:r(e.users)}m.emitChange()})});t["default"]=m},function(e,t){"use strict";function a(e,t){var a=!1,n=e.offsetTop,r=function(){a||(a=!0,requestAnimationFrame(function(){a=!1,window.scrollY>n-60?t.classList.add("fixed"):t.classList.remove("fixed")}))};window.addEventListener("scroll",r),window.addEventListener("resize",function(){n=e.offsetTop,r()})}Object.defineProperty(t,"__esModule",{value:!0}),t.makeSticky=a},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var c=a(32),s=n(c),u=a(33),m=n(u),f=a(35),d=n(f),p=a(43),h=n(p),y=a(48),v=n(y),b=a(49),g=n(b),E=a(50),R=n(E),k=a(51),w=n(k),_=a(52),N=n(_),T=a(3),C=(n(T),a(20)),O=n(C),P=a(42),j=n(P),S=a(53),L=function(e){function t(e){r(this,t);var a=i(this,Object.getPrototypeOf(t).call(this,e)),n=e.data,l=Object.assign({},S,{url:e.url});if(n){n.map&&!Array.isArray(n.map.markers)&&(n.map.markers=j["default"].objectToArray(n.map.markers)),n.map&&!Array.isArray(n.map.route)&&(n.map.route=j["default"].objectToArray(n.map.route)),n.time&&!Array.isArray(n.time.slots)&&(n.time.slots=j["default"].objectToArray(n.time.slots));for(var o in n)n[o]===!1?n[o]="":null===n[o]&&delete n[o];if(n.team=n.team||[],0===n.team.length){var c=e.user;n.team=[{type:"you","name-first":c.firstName,"name-last":c.lastName,role:"walk-leader",primary:"on",bio:c.bio,twitter:c.twitter,facebook:c.facebook,website:c.website,email:c.email,phone:""}]}Object.assign(l,n)}return a.state=l,a}return l(t,e),o(t,[{key:"saveWalk",value:function(e,t){var a=this,n=this.state.notifications.slice(),r=function(){var e=a.state.notifications.slice();a.setState({notifications:e.slice(1)})},i={messageTimeout:1200};e=Object.assign({},i,e),n.push({type:"info",name:"Saving walk"}),this.setState({map:this.refs.mapBuilder.getStateSimple(),notifications:n},function(){$.ajax({url:a.state.url,type:e.publish?"PUT":"POST",data:{json:JSON.stringify(a.state)},dataType:"json",success:function(e){var a=this.state.notifications.slice();a.push({type:"success",name:"Walk saved"}),this.setState({notifications:a,url:e.url||this.state.url},function(){t&&t instanceof Function&&t.call(this)}),setTimeout(r,1200)}.bind(a),error:function(e,t,a){var n=this.state.notifications.slice();n.push({type:"danger",name:"Walk failed to save",message:"Keep this window open and contact Jane's Walk for assistance"}),this.setState({notifications:n}),setTimeout(r,6e3),console.error(this.url,t,a.toString())}.bind(a)})}),setTimeout(r,1200)}},{key:"handleNext",value:function(){var e=$("#progress-panel > .nav > li.active + li > a");window.scrollTo(0,0),e.length?(this.saveWalk(),e.trigger("click")):$(React.findDOMNode(this.refs.publish)).trigger("click")}},{key:"handleSave",value:function(){this.saveWalk()}},{key:"handlePublish",value:function(){this.saveWalk({publish:!0},function(){return console.log("Walk published")})}},{key:"handlePreview",value:function(e){var t=this;this.saveWalk({},function(){return t.setState({preview:!0})})}},{key:"componentWillMount",value:function(){O["default"].addChangeListener(this._onChange.bind(this))}},{key:"componentWillUnmount",value:function(){O["default"].removeChangeListener(this._onChange.bind(this))}},{key:"_onChange",value:function(){this.setState({})}},{key:"render",value:function(){var e=this,t={value:this.state.map,requestChange:function(t,a){e.setState({map:t},a)}},a=this.props,n=a.user,r=a.valt,i=a.city;return React.createElement("main",{id:"create-walk"},React.createElement("section",null,React.createElement("nav",{id:"progress-panel"},React.createElement("ul",{className:"nav nav-tabs"},React.createElement("li",{className:"active"},React.createElement("a",{"data-toggle":"tab",className:"description",href:"#description"},React.createElement("i",{className:"fa fa-list-ol"}),(0,C.t)("Describe Your Walk"))),React.createElement("li",null,React.createElement("a",{"data-toggle":"tab",className:"route",href:"#route"},React.createElement("i",{className:"fa fa-map-marker"}),(0,C.t)("Share Your Route"))),React.createElement("li",null,React.createElement("a",{"data-toggle":"tab",className:"time-and-date",href:"#time-and-date"},React.createElement("i",{className:"fa fa-calendar"}),(0,C.t)("Set the Time & Date"))),React.createElement("li",null,React.createElement("a",{"data-toggle":"tab",className:"accessibility",href:"#accessibility"},React.createElement("i",{className:"fa fa-flag"}),(0,C.t)("Make it Accessible"))),React.createElement("li",null,React.createElement("a",{"data-toggle":"tab",className:"team",href:"#team"},React.createElement("i",{className:"fa fa-users"}),(0,C.t)("Build Your Team")))),React.createElement("section",{id:"button-group"},React.createElement("button",{className:"btn btn-info btn-preview",id:"preview-walk",title:"Preview what you have so far.",onClick:this.handlePreview},(0,C.t)("Preview Walk")),React.createElement("button",{className:"btn btn-info btn-submit",id:"btn-submit",title:"Publishing will make your visible to all.",onClick:function(){this.setState({publish:!0})}.bind(this),ref:"publish"},(0,C.t)("Publish Walk")),React.createElement("button",{className:"btn btn-info save",title:"Save",id:"btn-save",onClick:this.handleSave},(0,C.t)("Save")))),React.createElement("div",{id:"main-panel",role:"main"},React.createElement("div",{className:"tab-content"},React.createElement("div",{className:"tab-pane active",id:"description"},React.createElement("div",{className:"walk-submit lead clearfix"},React.createElement("div",{className:"col-md-4"},React.createElement("img",{id:"convo-marker",src:CCM_THEME_PATH+"/img/jw-intro-graphic.svg",alt:"Jane's Walks are walking conversations."})),React.createElement("div",{className:"col-md-8"},React.createElement("h1",null,(0,C.t)("Hey there, %s!",n.firstName)),React.createElement("p",null,(0,C.t)("Jane’s Walks are walking conversations about neighbourhoods. You can return to this form at any time, so there's no need to finish everything at once.")))),React.createElement("div",{className:"page-header","data-section":"description"},React.createElement("h1",null,(0,C.t)("Describe Your Walk"))),React.createElement("form",null,React.createElement("fieldset",null,React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"title"},(0,C.t)("Walk Title")),React.createElement("div",{className:"alert alert-info"},(0,C.t)("Something short and memorable.")),React.createElement("input",{type:"text",valueLink:this.linkState("title")})))),React.createElement(s["default"],{valueLink:this.linkState("thumbnails"),valt:r}),React.createElement("form",null,React.createElement("hr",null),React.createElement("fieldset",null,React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"shortdescription"},(0,C.t)("Your Walk in a Nutshell")),React.createElement("div",{className:"alert alert-info"},(0,C.t)("Build intrigue! This is what people see when browsing our walk listings.")),React.createElement(N["default"],{id:"shortdescription",name:"shortdescription",rows:"6",maxLength:"140",valueLink:this.linkState("shortDescription"),required:!0})),React.createElement("hr",null),React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"longdescription",id:"longwalkdescription"},(0,C.t)("Walk Description")),React.createElement("div",{className:"alert alert-info"},(0,C.t)("Help jump start the conversation on your walk by giving readers an idea of the discussions you'll be having on the walk together. We suggest including a couple of questions to get people thinking about how they can contribute to the dialog on the walk. To keep this engaging, we recommend keeping your description to 200 words.")),React.createElement("textarea",{id:"longdescription",name:"longdescription",rows:"14",valueLink:this.linkState("longDescription")}))),React.createElement(m["default"],{valueLink:this.linkState("checkboxes")}),(i.wards||[]).length>0?React.createElement(v["default"],{wards:i.wards,valueLink:this.linkState("wards")}):null,React.createElement("hr",null))),React.createElement(d["default"],{ref:"mapBuilder",valueLink:t,city:i}),React.createElement(h["default"],{valueLink:this.linkState("time")}),React.createElement("div",{className:"tab-pane",id:"accessibility"},React.createElement("div",{className:"page-header","data-section":"accessibility"},React.createElement("h1",null,(0,C.t)("Make it Accessible"))),React.createElement("div",{className:"item"},React.createElement(g["default"],{valueLink:this.linkState("checkboxes")})),React.createElement("div",{className:"item"},React.createElement("fieldset",null,React.createElement("legend",null,(0,C.t)("What else do people need to know about the accessibility of this walk?")," (",(0,C.t)("Optional"),")"),React.createElement(N["default"],{name:"accessible-info",rows:"3",maxLength:"500",valueLink:this.linkState("accessibleInfo")}))),React.createElement("div",{className:"item"},React.createElement("fieldset",null,React.createElement("legend",{id:"transit"},(0,C.t)("How can someone get to the meeting spot by public transit?")," (",(0,C.t)("Optional"),")"),React.createElement("div",{className:"alert alert-info"},(0,C.t)("Nearest subway stop, closest bus or streetcar lines, etc.")),React.createElement("textarea",{rows:"3",name:"accessible-transit",valueLink:this.linkState("accessibleTransit")}))),React.createElement("div",{className:"item"},React.createElement("fieldset",null,React.createElement("legend",null,(0,C.t)("Where are the nearest places to park?")," (",(0,C.t)("Optional"),")"),React.createElement("textarea",{rows:"3",name:"accessible-parking",valueLink:this.linkState("accessibleParking")}))),React.createElement("div",{className:"item"},React.createElement("fieldset",null,React.createElement("legend",{className:"required-legend"},(0,C.t)("How will people find you?")),React.createElement("div",{className:"alert alert-info"},(0,C.t)("Perhaps you will be holding a sign, wearing a special t-shirt or holding up an object that relates to the theme of your walk. Whatever it is, let people know how to identify you.")),React.createElement("textarea",{rows:"3",name:"accessible-find",valueLink:this.linkState("accessibleFind")}))),React.createElement("hr",null),React.createElement("br",null)),React.createElement(R["default"],{onChange:function(t){return e.setState({team:t})},team:this.state.team})),React.createElement("button",{type:"button",onClick:this.handleNext,className:"btn"},"Next")),React.createElement("aside",{id:"tips-panel",role:"complementary"},React.createElement("div",{className:"popover right",id:"city-organizer",style:{display:"block"}},React.createElement("h3",{className:"popover-title","data-toggle":"collapse","data-target":"#popover-content"},React.createElement("i",{className:"fa fa-envelope"}),(0,C.t)("Contact City Organizer for help")),React.createElement("div",{className:"popover-content collapse in",id:"popover-content"},i.cityOrganizer.photo?React.createElement("div",{className:"u-avatar",style:{backgroundImage:"url("+i.cityOrganizer.photo+")"}}):null,React.createElement("p",null,(0,C.t)("Hi! I'm %s, the City Organizer for Jane's Walk %s. I'm here to help, so if you have any questions, please",i.cityOrganizer.firstName,i.name)," ",React.createElement("strong",null,React.createElement("a",{href:"mailto:"+i.cityOrganizer.email},(0,C.t)("email me"),"!"))))))),this.state.publish?React.createElement(w["default"],{url:this.state.url,saveWalk:this.saveWalk.bind(this),close:this.setState.bind(this,{publish:!1}),city:i,mirrors:this.state.mirrors}):null,this.state.preview?React.createElement(WalkPreview,{url:this.state.url,close:this.setState.bind(this,{preview:!1})}):null,React.createElement("aside",{id:"notifications"},this.state.notifications.map(function(e){return React.createElement("div",{key:e.message,className:"alert alert-"+e.type},React.createElement("strong",null,e.name||"",": "),e.message||"")})))}}]),t}(React.Component);t["default"]=L,Object.assign(L.prototype,React.addons.LinkedStateMixin),function(e){function t(){return r(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return l(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this,t=React.findDOMNode(this);$(t).modal(),$(t).bind("hidden.bs.modal",function(){return e.props.close()})}},{key:"render",value:function(){return React.createElement("dialog",{id:"preview-modal"},React.createElement("div",null,React.createElement("article",null,React.createElement("header",null,React.createElement("button",{type:"button",className:"close","aria-hidden":"true","data-dismiss":"modal"},"×"),React.createElement("h3",null,(0,C.t)("Preview of your Walk"))),React.createElement("div",{className:"modal-body"},React.createElement("iframe",{src:this.props.url,frameBorder:"0"})))))}}]),t}(React.Component)},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=a(20),c=function(e){function t(){n(this,t);var e=r(this,Object.getPrototypeOf(t).call(this));return e.handleUpload=e.handleUpload.bind(e),e}return i(t,e),l(t,[{key:"removeImage",value:function(e){var t=this.props.valueLink.value;t.splice(e,1),this.props.valueLink.requestChange(t)}},{key:"handleUpload",value:function(e){var t=new FormData,a=new XMLHttpRequest,n=this;e.currentTarget.files&&(t.append("Filedata",e.currentTarget.files[0]),t.append("ccm_token",this.props.valt),a.open("POST",CCM_TOOLS_PATH+"/files/importers/quick"),a.onload=function(){try{var e=n.props.valueLink.value,t=JSON.parse(this.responseText);e.push(t),n.props.valueLink.requestChange(e)}catch(a){}},a.send(t))}},{key:"render",value:function(){var e=this,t=this.props.valueLink.value;return React.createElement("form",{className:"upload-image"},React.createElement("label",{htmlFor:"walkphotos",id:"photo-tip"},(0,o.t)("Upload a photo that best represents your walk.")),t.map(function(t,a){var n=(t.url||""+a).replace(/^.*[\\\/]/,"");return React.createElement("div",{key:n,className:"thumbnail",style:{backgroundImage:"url("+t.url+")"}},React.createElement("a",{className:"remove",onClick:e.removeImage.bind(e,a)},React.createElement("i",{className:"fa fa-times-circle"})))}),t.length<1?React.createElement("div",{className:"thumbnail fileupload"},React.createElement("input",{className:"ccm-al-upload-single-file",type:"file",onChange:this.handleUpload}),React.createElement("i",{className:"fa fa-camera-retro fa-5x"}),React.createElement("span",{className:"fileupload-new"},(0,o.t)("Click to upload an image"))):void 0)}}]),t}(React.Component);t["default"]=c},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=a(20),c=a(34),s=function(e){function t(){n(this,t);var e=r(this,Object.getPrototypeOf(t).call(this));return e.state={maxChecked:3,totalChecked:0},e}return i(t,e),l(t,[{key:"render",value:function(){var e=this,t=this,a=this.props.valueLink.value,n=0;for(var r in a)a[r]&&"theme-"===r.substring(0,6)&&n++;return React.createElement("fieldset",{id:"theme-select"},React.createElement("legend",{className:"required-legend"},(0,o.t)("Themes")),React.createElement("div",{className:"alert alert-info"},(0,o.t)("Pick between %d and %d boxes.",1,this.state.maxChecked)),this.props.themeCategories.map(function(r){return React.createElement("fieldset",{key:r.name},React.createElement("legend",null,(0,o.t)(r.name)),r.themes.map(function(r){var i=n>=t.state.maxChecked&&!a[r.id];return React.createElement("label",{key:r.id,className:"checkbox"},React.createElement("input",{type:"checkbox",disabled:i,checkedLink:e.linkParentState(r.id)}),(0,o.t)(r.name))}))}),";")}}]),t}(React.Component);t["default"]=s,Object.assign(s.prototype,c.linkedParentState),s.defaultProps={themeCategories:[{name:"Community",themes:[{id:"theme-civic-activist",name:"Activism"},{id:"theme-civic-truecitizen",name:"Citizenry"},{id:"theme-civic-goodneighbour",name:"Community"},{id:"theme-culture-writer",name:"Storytelling"}]},{name:"City-building",themes:[{id:"theme-urban-architecturalenthusiast",name:"Architecture"},{id:"theme-culture-aesthete",name:"Design"},{id:"theme-urban-suburbanexplorer",name:"Suburbs"},{id:"theme-urban-moversandshakers",name:"Transportation"}]},{name:"Society",themes:[{id:"theme-civic-gender",name:"Gender"},{id:"theme-civic-health",name:"Health"},{id:"theme-culture-historybuff",name:"Heritage"},{id:"theme-civic-nativeissues",name:"Native Issues"},{id:"theme-civic-religion",name:"Religion"}]},{name:"Expression",themes:[{id:"theme-culture-artist",name:"Art"},{id:"theme-urban-film",name:"Film"},{id:"theme-culture-bookworm",name:"Literature"},{id:"theme-urban-music",name:"Music"},{id:"theme-urban-play",name:"Play"}]},{name:"The Natural World",themes:[{id:"theme-nature-petlover",name:"Animals"},{id:"theme-nature-greenthumb",name:"Gardening"},{id:"theme-nature-naturelover",name:"Nature"},{id:"theme-urban-water",name:"Water"}]},{name:"Modernity",themes:[{id:"theme-civic-international",name:"International Issues"},{id:"theme-civic-military",name:"Military"},{id:"theme-civic-commerce",name:"Commerce"},{id:"theme-culture-nightowl",name:"Night Life"},{id:"theme-culture-techie",name:"Technology"},{id:"theme-urban-sports",name:"Sports"},{id:"theme-culture-foodie",name:"Food"}]}]}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.linkedParentState={linkParentState:function(e){var t=this.props.valueLink,a=t.value;return{value:a[e],requestChange:function(n){a[e]=n,t.requestChange(a)}}}}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var c=a(36),s=n(c),u=a(37),m=n(u),f=a(38),d=n(f),p=a(39),h=n(p),y=a(40),v=n(y),b=a(41),g=n(b),E=a(20),R=(a(42),{url:CCM_THEME_PATH+"/images/marker.png",size:new google.maps.Size(30,46),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(11,44)}),k=function(e){function t(){r(this,t);var e=i(this,Object.getPrototypeOf(t).call(this));return e.state={mode:{},map:null,markers:new google.maps.MVCArray,route:null,infowindow:new google.maps.InfoWindow,filters:[]},e}return l(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this,t=new google.maps.Map(React.findDOMNode(this.refs.gmap),{center:new google.maps.LatLng(this.props.city.latlng[0],this.props.city.latlng[1]),zoom:this.props.initialZoom,scrollwheel:!1,rotateControl:!0,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE]}});$('a[href="#route"]').on("shown.bs.tab",function(t){return e.boundMapByWalk()}),this.setState({map:t},this.refreshGMap)}},{key:"refreshGMap",value:function(){var e=this,t=this.props.valueLink,a=new google.maps.MVCArray,n=null;this.state.route&&this.state.route.setMap(null);var r=!0,i=!1,l=void 0;try{for(var o,c=this.state.markers[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var s=o.value;s.setMap(null)}}catch(u){i=!0,l=u}finally{try{!r&&c["return"]&&c["return"]()}finally{if(i)throw l}}if(t.value){var m=!0,f=!1,d=void 0;try{for(var p,h=t.value.markers[Symbol.iterator]();!(m=(p=h.next()).done);m=!0){var s=p.value,y=void 0;y=s.lat&&s.lng?new google.maps.LatLng(s.lat,s.lng):this.state.map.center,a.push(this.buildMarker({latlng:y,title:s.title,description:s.description,media:s.media}))}}catch(u){f=!0,d=u}finally{try{!m&&h["return"]&&h["return"]()}finally{if(f)throw d}}n=this.buildRoute(t.value.route)}else n=this.buildRoute([]);google.maps.event.addListener(this.state.map,"click",function(t){e.state.infowindow.setMap(null),e.state.mode.addRoute&&(n.setPath(n.getPath().push(t.latLng)),e.setState({route:n}))}),this.setState({markers:a,route:n})}},{key:"boundMapByWalk",value:function(){var e=new google.maps.LatLngBounds;if(google.maps.event.trigger(this.state.map,"resize"),this.state.markers.getLength()){for(var t=0,a=this.state.markers.getLength();a>t;t++)e.extend(this.state.markers.getAt(t).getPosition());this.state.map.fitBounds(e)}}},{key:"buildMarker",value:function(e){var t=this,a=this.state.map,n={animation:google.maps.Animation.DROP,draggable:!0,style:"stop",map:a,icon:R},r=void 0;return e=Object.assign({},{latlng:null,title:"",description:"",media:null},e),e.latlng instanceof google.maps.LatLng?n.position=e.latlng:n.position=this.state.map.center,n.title=JSON.stringify({title:e.title,description:e.description,media:e.media}),r=new google.maps.Marker(n),google.maps.event.addListener(r,"click",function(e){return t.showInfoWindow(r)}),google.maps.event.addListener(r,"drag",function(e){}),r}},{key:"showInfoWindow",value:function(e){var t=document.createElement("div");React.render(React.createElement(m["default"],{marker:e,deleteMarker:this.deleteMarker.bind(this,e),refresh:this.syncState.bind(this)}),t),this.state.map.panTo(e.getPosition()),this.state.infowindow.setContent(t),this.state.infowindow.open(this.state.map,e)}},{key:"buildRoute",value:function(e){var t=this,a=new google.maps.Polyline({strokeColor:"#F16725",strokeOpacity:.8,strokeWeight:3,editable:!0,map:this.state.map});return google.maps.event.addListener(a,"rightclick",function(e){void 0!==e.vertex&&a.setPath(a.getPath().removeAt(e.vertex))}),google.maps.event.addListener(a,"mousedown",function(e){return t.state.infowindow.setMap(null)}),e.length>0&&a.setPath(e.map(function(e){return new google.maps.LatLng(e.lat,e.lng)})),a}},{key:"deleteMarker",value:function(e){var t=this.state.markers;e.setMap(null),t.removeAt(t.indexOf(e)),this.setState({markers:t})}},{key:"moveBefore",value:function(e,t){var a=this.state.markers,n=a.getAt(e);a.removeAt(e),a.insertAt(t,n),this.setState({markers:a},this.syncState)}},{key:"toggleAddPoint",value:function(){var e=this,t=this.state.markers,a=this.buildMarker();t.push(a),this.setState({markers:t,mode:{}},function(){e.syncState(),e.showInfoWindow(a)}),this.state.infowindow.setMap(null)}},{key:"toggleAddRoute",value:function(){this.setState({mode:{addRoute:!this.state.mode.addRoute}})}},{key:"clearRoute",value:function(){this.state.infowindow.setMap(null),this.state.route.setPath([]),this.setState({mode:{}})}},{key:"getStateSimple",value:function(){var e=this.state.markers.getArray().map(function(e){var t=JSON.parse(e.title);return{lat:e.position.lat(),lng:e.position.lng(),title:t.title,description:t.description,media:t.media,style:"stop"}}),t=[];return this.state.route&&(t=this.state.route.getPath().getArray().map(function(e){return{lat:e.lat(),lng:e.lng()}})),{markers:e,route:t}}},{key:"syncState",value:function(){this.props.valueLink.requestChange(this.getStateSimple())}},{key:"handleRemoveFilter",value:function(e){var t=this.state.filters.slice();t.splice(e,1),this.setState({filters:t})}},{key:"handleChangeFilter",value:function(e,t){var a=this.state.filters.slice();a[e].value=t,this.setState({filters:a})}},{key:"handleAddFilter",value:function(e){var t=this.state.filters.slice();t.push(e),this.setState({filters:t})}},{key:"render",value:function(){var e=void 0,t={valueLink:this.props.valueLink,refreshGMap:this.refreshGMap.bind(this),boundMapByWalk:this.boundMapByWalk.bind(this),addFilter:this.handleAddFilter.bind(this),city:this.props.city};return this.state.markers&&this.state.markers.length&&(e=[React.createElement("h3",{key:"stops"},(0,E.t)("Walk Stops")),React.createElement(s["default"],{ref:"walkStopTable",key:1,markers:this.state.markers,deleteMarker:this.deleteMarker.bind(this),moveBefore:this.moveBefore.bind(this),showInfoWindow:this.showInfoWindow.bind(this)})]),React.createElement("div",{className:"tab-pane",id:"route",ref:"route"},React.createElement("div",{className:"page-header","data-section":"route"},React.createElement("h1",null,(0,E.t)("Share Your Route"))),React.createElement("div",{className:"alert alert-info"},(0,E.t)("Make sure to add a description to your meeting place, and the last stop. This is how people will find you on the day of your walk.")),React.createElement("div",{id:"map-control-bar"},React.createElement("button",{ref:"addPoint",className:this.state.mode.addPoint?"active":"",onClick:this.toggleAddPoint.bind(this)},React.createElement("i",{className:"fa fa-map-marker"}),(0,E.t)("Add Stop")),React.createElement("button",{ref:"addRoute",className:this.state.mode.addRoute?"active":"",onClick:this.toggleAddRoute.bind(this)},React.createElement("i",{className:"fa fa-arrows"}),(0,E.t)("Add Route")),React.createElement("button",{ref:"clearroute",onClick:this.clearRoute.bind(this)},React.createElement("i",{className:"fa fa-eraser"}),(0,E.t)("Clear Route")),React.createElement(v["default"],t),React.createElement(d["default"],t),React.createElement(h["default"],t)),React.createElement(g["default"],{filters:this.state.filters,changeFilter:this.handleChangeFilter.bind(this),remove:this.handleRemoveFilter.bind(this)}),React.createElement("div",{className:"map-notifications"}),React.createElement("div",{id:"map-canvas",ref:"gmap"}),e,React.createElement("hr",null))}}]),t}(React.Component);t["default"]=k,Object.assign(k,{defaultProps:{initialZoom:15}})},function(e,t,a){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};Object.defineProperty(t,"__esModule",{value:!0});var r=a(20),i=function(e){return React.createElement("a",n({className:"move-marker-up"},e),React.createElement("i",{className:"fa fa-arrow-up"}))},l=function(e){return React.createElement("a",n({className:"move-marker-down"},e),React.createElement("i",{className:"fa fa-arrow-down"}))},o=function(e){return React.createElement("a",n({className:"delete-stop"},e),React.createElement("i",{className:"fa fa-times-circle-o"}))},c=function(e){var t=JSON.parse(e.marker.title),a=e.index,n=function(){return e.showInfoWindow(e.marker)},c=void 0,s=void 0,u=void 0,m=void 0;return a>0?u=React.createElement(i,{onClick:function(){return e.moveBefore(a,a-1)}}):c=(0,r.t)("Meeting Place")+": ",a<e.length-1&&(m=React.createElement(l,{onClick:function(){return e.moveBefore(a,a+1)}})),t.media&&"instagram"===t.media.type&&(s=React.createElement("img",{src:t.media.url+"media?size=t"})),React.createElement("tr",null,React.createElement("td",{onClick:n},c,s,t.title),React.createElement("td",{onClick:n},t.description),React.createElement("td",null,m,u),React.createElement("td",null,React.createElement(o,{onClick:function(){return e.deleteMarker(marker)}})))},s=function(e){var t=e.markers.getArray();return React.createElement("table",{className:"table-hover routeStops"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,(0,r.t)("Title")),React.createElement("th",null,(0,r.t)("Description")),React.createElement("th",{className:"controls"},React.createElement("i",{className:"fa fa-arrows"})),React.createElement("th",null,React.createElement("i",{className:"fa fa-trash-o"})))),React.createElement("tbody",null,t.map(function(a,r){return React.createElement(c,n({marker:a,key:"marker"+r,index:r,length:t.length},e))})))};t["default"]=s},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);
}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(e){a(this,t);var r=n(this,Object.getPrototypeOf(t).call(this));return r.state={marker:e.marker},r.handleTitleChange=r.handleTitleChange.bind(r),r.handleDescriptionChange=r.handleDescriptionChange.bind(r),r}return r(t,e),i(t,[{key:"setMarkerContent",value:function(e){var t=this.state.marker;t.setTitle(JSON.stringify(Object.assign({},JSON.parse(t.getTitle()),e))),this.setState({marker:t},this.props.refresh)}},{key:"handleTitleChange",value:function(e){this.setMarkerContent({title:e.target.value})}},{key:"handleDescriptionChange",value:function(e){this.setMarkerContent({description:e.target.value})}},{key:"render",value:function(){var e=this.state.marker;if(e){var t=JSON.parse(e.getTitle()),a=void 0;return t.media&&("instagram"===t.media.type?a=React.createElement("img",{className:"media",src:t.media.url+"media?size=t"}):"soundcloud"===t.media.type&&(a=React.createElement("iframe",{className:"media",width:"150",height:"100%",scrolling:"no",frameborder:"no",src:"https://w.soundcloud.com/player/?url="+t.media.url+"&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&visual=true"}))),React.createElement("div",{className:"stop-form"},a,React.createElement("section",{className:"details"},React.createElement("input",{type:"text",onChange:this.handleTitleChange,value:t.title,placeholder:"Title of this stop",className:"marker-title"}),React.createElement("textarea",{className:"marker-description box-sizing",onChange:this.handleDescriptionChange,placeholder:"Description of this stop",value:t.description})),React.createElement("a",{onClick:this.props.deleteMarker},React.createElement("i",{className:"fa fa-trash-o"})))}}}]),t}(React.Component);t["default"]=l},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){a(this,t);var e=n(this,Object.getPrototypeOf(t).call(this));return e.state={accessToken:null},e}return r(t,e),i(t,[{key:"handleConnect",value:function(e){var t=this,a="af1d04f3e16940f3801ee06461c9e4bb",n="http://janeswalk.org/connected";window.loadAccessToken=function(a){return t.setState({accessToken:a},e)};var r=window.open("https://instagram.com/oauth/authorize/?client_id="+a+"&redirect_uri="+n+"&response_type=token");this.setState({authWindow:r})}},{key:"handleLoadFeed",value:function(e){var t=this;$.ajax({type:"GET",crossDomain:!0,dataType:"jsonp",url:"https://api.instagram.com/v1/users/self/media/recent?access_token="+this.state.accessToken,success:function(a){var n=(t.props.valueLink.value||{markers:[]}).markers.slice(),r=a.data.filter(function(t){var a=!0;return e&&(a=-1!==t.tags.indexOf(e)),!(!t.location||!a)}).reverse().map(function(e){var t="";return e.comments&&e.comments.data.length>0&&e.comments.data[0].from.id===e.user.id&&(t=e.comments.data[0].text),{title:e.caption?e.caption.text.replace(/\#\w+/g,"").trim():"",description:t,media:{id:e.id,url:e.link,type:"instagram"},lat:e.location.latitude,lng:e.location.longitude}});t.props.valueLink.requestChange({markers:n.concat(r),route:t.props.valueLink.value.route},function(){t.props.refreshGMap(),t.props.boundMapByWalk()})}})}},{key:"addFilter",value:function(){var e=this,t={type:"text",icon:"fa fa-instagram",placeholder:"Type in the tag you used on the geocoded photos for your walk",value:"",cb:this.handleLoadFeed.bind(this)};this.state.accessToken?this.props.addFilter(t):this.handleConnect(function(){return e.props.addFilter(t)})}},{key:"render",value:function(){var e=this;return React.createElement("button",{onClick:function(){return e.addFilter()}},React.createElement("i",{className:"fa fa-instagram"}),"Instagram")}}]),t}(React.Component);t["default"]=l},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){a(this,t);var e=n(this,Object.getPrototypeOf(t).call(this));return e.state={playlists:[]},e}return r(t,e),i(t,[{key:"handleConnect",value:function(e){var t=this,a="3a4c85d0eb4f8579fb680bb738bd0ba8",n="http://janeswalk.org/connected";window.loadAccessToken=function(a){t.setState({accessToken:a},t.handleLoadPlaylists(a,e))};var r=window.open("https://soundcloud.com/connect/?client_id="+a+"&redirect_uri="+n+"&response_type=token&state=soundcloud");this.setState({authWindow:r})}},{key:"handleLoadPlaylists",value:function(e,t){e=e||this.state.accessToken,$.ajax({type:"GET",crossDomain:!0,dataType:"jsonp",url:"https://api.soundcloud.com/me/playlists.json?oauth_token="+e,success:function(e){_this.setState({playlists:e}),t()}})}},{key:"loadPointsFromPlaylist",value:function(e){var t=this,a=(this.props.valueLink.value||{markers:[]}).markers.slice(),n=this.state.playlists[e].tracks.map(function(e){var t={title:e.title||"",description:e.description||"",media:{type:"soundcloud",id:e.id,url:e.uri}};return e.tag_list.split(" ").forEach(function(e){var a=void 0;a=e.indexOf("geo:lat="),a>-1&&(t.lat=e.substr(a+8)),a=e.indexOf("geo:lon="),a>-1&&(t.lng=e.substr(a+8))}),t});this.props.valueLink.requestChange({markers:a.concat(n),route:this.props.valueLink.value.route},function(){t.props.refreshGMap(),t.props.boundMapByWalk()})}},{key:"addFilter",value:function(){var e=this,t={type:"select",icon:"fa fa-soundcloud",options:this.state.playlists,value:0,cb:this.loadPointsFromPlaylist};this.state.accessToken?this.props.addFilter(t):this.handleConnect(function(){t.options=e.state.playlists,e.props.addFilter(t)})}},{key:"render",value:function(){var e=this;return React.createElement("button",{onClick:function(){return e.addFilter()}},React.createElement("i",{className:"fa fa-soundcloud"}),"SoundCloud")}}]),t}(React.Component);t["default"]=l},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){a(this,t);var e=n(this,Object.getPrototypeOf(t).call(this));return e.state={query:"",accessToken:!0},e}return r(t,e),i(t,[{key:"componentWillMount",value:function(){var e=this;window.setAccessToken=function(t){return e.setState({accessToken:t})}}},{key:"handleLoadToken",value:function(){var e=this;$.ajax({method:"GET",url:"/api/twitter",dataType:"json",success:function(t){t.access_token&&e.setState({accessToken:t.access_token})}})}},{key:"loadFeed",value:function(e){var t=this;e=encodeURIComponent(e),$.ajax({type:"GET",url:"/api/twitter?q="+e+"&coords="+this.props.city.latlng[0]+","+this.props.city.latlng[1],success:function(e){var a=(t.props.valueLink.value||{markers:[]}).markers.slice();t.props.valueLink.requestChange({markers:a.concat(e.map(function(e){return{title:e.description.split(" ").slice(0,5).join(" "),description:e.description,lat:e.lat,lng:e.lng}})),route:t.props.valueLink.value.route},function(){setTimeout(function(){t.props.refreshGMap(),t.props.boundMapByWalk()},100)})}})}},{key:"handleQueryChange",value:function(e){this.setState({query:e.target.value})}},{key:"addFilter",value:function(){this.props.addFilter({type:"text",icon:"fa fa-twitter",placeholder:'Type in a standard twitter search for geocoded tweets, e.g. "#ParkStroll #janeswalk from:MyName"',value:"",cb:this.loadFeed})}},{key:"render",value:function(){var e=this;return React.createElement("button",{onClick:function(){return e.addFilter}},React.createElement("i",{className:"fa fa-twitter"}),"twitter")}}]),t}(React.Component);t["default"]=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=React.addons.CSSTransitionGroup;t["default"]=function(e){var t=e.filters,n=e.remove,r=e.changeFilter;return React.createElement("div",{className:"filterInputs"},React.createElement(a,{transitionName:"fade"},t.map(function(e,t){var a=function(a){a.preventDefault(),e.cb(e.value),n(t)},i=function(e){return r(t,e.target.value)},l=null;return"text"===e.type?l=React.createElement("input",{type:"text",placeholder:e.placeholder,value:e.text,onChange:i}):"select"===e.type&&(l=React.createElement("select",{selected:e.value,onChange:i},e.options.map(function(e,t){return React.createElement("option",{key:"option"+t,value:t},e.title)}))),React.createElement("form",{className:"filter",onSubmit:a},React.createElement("i",{className:e.icon}),React.createElement("span",{className:"input"},l),React.createElement("span",{className:"button"},React.createElement("input",{type:"submit",value:"Go"})),React.createElement("span",{className:"button"},React.createElement("input",{type:"button",value:"Cancel",onClick:function(){return n(t)}})))})))}},function(e,t){"use strict";t.renderAsNode=function(e){var t=document.createElement("span");return React.render(t,e),t},t.objectToArray=function(e){var t=[];for(var a in e)t[a]=e[a];return t.filter(function(e){return void 0!==e})}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=a(20),c=a(44),s=a(45),u=a(46),m=a(47),f=36e5,d=function(e){function t(){n(this,t);var e=r(this,Object.getPrototypeOf(t).call(this)),a=new Date,i=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()+7,11,0));return e.setDay=e._setDay.bind(e),e.addDate=e._addDate.bind(e),e.state={start:i,duration:f},e}return i(t,e),l(t,[{key:"_setDay",value:function(e){var t=this.state.start;t.setUTCFullYear(e.getUTCFullYear()),t.setUTCMonth(e.getUTCMonth()),t.setUTCDate(e.getUTCDate()),this.refs.timePicker.setStartTimes(t),this.setState({start:t})}},{key:"setTime",value:function(e,t){var a=this.state.start;a.setUTCHours(e.getUTCHours()),a.setUTCMinutes(e.getUTCMinutes()),this.setState({start:a})}},{key:"linkTime",value:function(){var e=this;return{value:this.state.start.getTime(),requestChange:function(t){return e.setState({start:new Date(Number(t))})}}}},{key:"_addDate",value:function(){var e=this.props.valueLink,t=e.value||{},a=(t.slots||[]).slice(),n=this.state.start.getTime(),r=n+this.state.duration;a.push([n/1e3,r/1e3]),t.slots=a,e.requestChange(t)}},{key:"render",value:function(){var e=this.props.valueLink;return React.createElement("div",{className:"tab-pane",id:"time-and-date"},React.createElement("div",{className:"tab-content",id:"walkduration"},React.createElement("div",{className:"tab-pane hide",id:"time-and-date-select"},React.createElement("div",{className:"page-header","data-section":"time-and-date"},React.createElement("h1",null,(0,o.t)("Set the Time and Date"))),React.createElement("legend",null,(0,o.t)("Pick one of the following:")),React.createElement("div",{className:"row"},React.createElement("ul",{className:"thumbnails",id:"block-select"},React.createElement("li",null,React.createElement("a",{href:"#time-and-date-all","data-toggle":"tab"},React.createElement("div",{className:"thumbnail"},React.createElement("img",{src:CCM_THEME_PATH+"/img/time-and-date-full.png"}),React.createElement("div",{className:"caption"},React.createElement("div",{className:"text-center"},React.createElement("h4",null,(0,o.t)("By Request"))),React.createElement("p",null,(0,o.t)("Highlight times that you're available to lead the walk, or leave your availability open. People will be asked to contact you to set up a walk.")))))),React.createElement("li",null,React.createElement("a",{href:"#time-and-date-set","data-toggle":"tab"},React.createElement("div",{className:"thumbnail"},React.createElement("img",{src:CCM_THEME_PATH+"/img/time-and-date-some.png"}),React.createElement("div",{className:"caption"},React.createElement("div",{className:"text-center"},React.createElement("h4",null,(0,o.t)("Pick Your Date"))),React.createElement("p",null,(0,o.t)("Set specific dates and times that this walk is happening."))))))))),React.createElement("div",{className:"tab-pane active",id:"time-and-date-set"},React.createElement("div",{className:"page-header","data-section":"time-and-date"},React.createElement("h1",null,(0,o.t)("Time and Date")),React.createElement("p",{className:"lead"},(0,o.t)("Select the date and time your walk is happening."))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement(c,{setDay:this.setDay,defaultDate:this.state.start})),React.createElement("div",{className:"col-md-6"},React.createElement("div",{className:"thumbnail"},React.createElement("div",{className:"caption"},React.createElement("h4",{className:"date-indicate-set"},React.createElement("small",null,(0,o.t)("Date selected"),":"),this.state.start.toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric",timeZone:"UTC"})),React.createElement("hr",null),React.createElement(s,{ref:"timePicker",i18n:this.props.i18n,valueLinkDuration:this.linkState("duration"),valueLinkStart:this.linkTime()}),React.createElement("hr",null),React.createElement("button",{className:"btn btn-primary",id:"save-date-set",onClick:this.addDate},(0,o.t)("Add Date")))))),React.createElement("br",null),React.createElement(u,{i18n:this.props.i18n,valueLink:e}),React.createElement("hr",null)),React.createElement("div",{className:"tab-pane hide",id:"time-and-date-all"},React.createElement("div",{className:"page-header","data-section":"time-and-date"},React.createElement("h1",null,(0,o.t)("Time and Date")),React.createElement("p",{className:"lead"},(0,o.t)("Your availability will be visible to people on your walk page and they’ll be able to send you a walk request."))),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",name:"open"}),(0,o.t)("Leave my availability open. Allow people to contact you to set up a walk.")),React.createElement("br",null),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement("div",{className:"date-picker"})),React.createElement("div",{className:"col-md-6"},React.createElement("div",{className:"thumbnail"},React.createElement("div",{className:"caption"},React.createElement("div",{className:"date-select-group"},React.createElement("small",null,(0,o.t)("Date selected"),":"),React.createElement("h4",{className:"date-indicate-all"}),React.createElement("hr",null)),React.createElement("label",{htmlFor:"walk-duration"},(0,o.t)("Approximate Duration of Walk"),":"),React.createElement("select",{name:"duration",id:"walk-duration",defaultValue:"1 Hour, 30 Minutes"},React.createElement("option",{value:"30 Minutes"},"30 Minutes"),React.createElement("option",{value:"1 Hour"},"1 Hour"),React.createElement("option",{value:"1 Hour, 30 Minutes"},"1 Hour, 30 Minutes"),React.createElement("option",{value:"2 Hours"},"2 Hours"),React.createElement("option",{value:"2 Hours, 30 Minutes"},"2 Hours, 30 Minutes"),React.createElement("option",{value:"3 Hours"},"3 Hours"),React.createElement("option",{value:"3 Hours, 30 Minutes"},"3 Hours, 30 Minutes")),React.createElement("div",{className:"date-select-group"},React.createElement("hr",null),React.createElement("button",{className:"btn btn-primary",id:"save-date-all",onClick:this.addDate},(0,o.t)("Add Date"))))))),React.createElement("br",null),React.createElement(m,null),React.createElement("hr",null))))}}]),t}(React.Component);t["default"]=d,Object.assign(d.prototype,React.addons.LinkedStateMixin)},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){return a(this,t),n(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,e),i(t,[{key:"componentDidMount",value:function(){$(React.findDOMNode(this)).datepicker({defaultDate:this.props.defaultDate,onSelect:function(e){var t=e.split("/");this.props.setDay(new Date(Date.UTC(t[2],t[0]-1,t[1])))}.bind(this)})}},{key:"render",value:function(){return React.createElement("div",{className:"date-picker"})}}]),t}(React.Component);t["default"]=l},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=a(20),c=function(e){function t(){n(this,t);var e=r(this,Object.getPrototypeOf(t).call(this));return e.state={startTimes:[]},e}return i(t,e),l(t,[{key:"setStartTimes",value:function(e,t){if(this.state.start!==e){var a=new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"2-digit",timeZone:"UTC"}),n=[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()],r=Date.UTC.apply(this,n),i=Date.UTC.apply(this,n.concat([23,30])),l=[];t=t||18e5;for(var o=r;i>=o;o+=t)l.push({asMs:o,asString:a.format(o)});this.setState({start:e,startTimes:l})}}},{key:"componentWillMount",value:function(){this.setStartTimes(new Date(this.props.valueLinkStart.value))}},{key:"render",value:function(){var e=this.props.valueLinkDuration,t=e.requestChange,a=this.props.valueLinkStart;return e.requestChange=function(e){return t(+e)},React.createElement("div",{className:"time-picker"},React.createElement("label",{htmlFor:"walk-time"},(0,o.t)("Start Time"),":"),React.createElement("select",{name:"start",id:"walk-start",valueLink:a},this.state.startTimes.map(function(e,t){return React.createElement("option",{key:"walk-start"+t,value:e.asMs},e.asString)})),React.createElement("label",{htmlFor:"walk-time"},(0,o.t)("Approximate Duration of Walk"),":"),React.createElement("select",{name:"duration",id:"walk-duration",valueLink:e},React.createElement("option",{value:18e5},"30 Minutes"),React.createElement("option",{value:36e5},"1 Hour"),React.createElement("option",{value:54e5},"1 Hour, 30 Minutes"),React.createElement("option",{value:72e5},"2 Hours"),React.createElement("option",{value:9e6},"2 Hours, 30 Minutes"),React.createElement("option",{value:108e5},"3 Hours"),React.createElement("option",{value:126e5},"3 Hours, 30 Minutes")))}}]),t}(React.Component);t["default"]=c},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=a(20),c=function(e){function t(){return n(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),l(t,[{key:"removeSlot",value:function(e){var t=this.props.valueLink,a=t.value,n=(a.slots||[]).slice();n.splice(e,1),a.slots=n,t.requestChange(a)}},{key:"render",value:function(){var e=this,t=this.props.valueLink.value.slots||[],a=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"}),n=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",timeZone:"UTC"});return React.createElement("table",{className:"table table-bordered table-hover",id:"date-list-all"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,(0,o.t)("Date")),React.createElement("th",null,(0,o.t)("Start Time")),React.createElement("th",null,(0,o.t)("Duration")),React.createElement("th",null))),React.createElement("tbody",null,t.map(function(t,r){var i=new Date(1e3*t[0]),l=new Date(1e3*(t[1]-t[0])),c=l.getUTCHours(),s=l.getUTCMinutes(),u=[];return c&&u.push((0,o.t2)("%d Hour","%d Hours",c)),s&&u.push((0,o.t2)("%d Minute","%d Minutes",s)),React.createElement("tr",{key:r},React.createElement("td",null,a.format(i)),React.createElement("td",null,n.format(i)),React.createElement("td",null,u.join(", ")),React.createElement("td",null,React.createElement("a",{onClick:e.removeSlot.bind(e,r)},React.createElement("i",{className:"fa fa-times-circle-o"})," ",(0,o.t)("Remove"))))})))}}]),t}(React.Component);t["default"]=c},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){return a(this,t),n(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,e),i(t,[{key:"render",value:function(){return React.createElement("table",null)}}]),t}(React.Component);t["default"]=l},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=a(20),c=a(34),s=function(e){function t(){return n(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.wards;return e&&this.props.valueLink?React.createElement("fieldset",{id:"wards"},React.createElement("legend",null,(0,o.t)("Sub-locality")),React.createElement("div",{className:"item"},React.createElement("div",{className:"alert alert-info"},(0,o.t)("Choose a specific neighbourhood or area where your walk will take place.")),React.createElement("select",{id:"ward",name:"ward",valueLink:this.props.valueLink},React.createElement("option",{value:""},"Choose a region"),e.map(function(e,t){return React.createElement("option",{key:t,value:e.value},e.value)})))):React.createElement("fieldset",{id:"wards"})}}]),t}(React.Component);t["default"]=s,Object.assign(s.prototype,c.linkedParentState)},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=a(34),c=a(20),s=[{id:"accessible-familyfriendly",name:(0,c.t)("Family friendly")},{id:"accessible-wheelchair",name:(0,c.t)("Wheelchair accessible")},{id:"accessible-dogs",name:(0,c.t)("Dogs welcome")},{id:"accessible-strollers",name:(0,c.t)("Strollers welcome")},{id:"accessible-bicycles",name:(0,c.t)("Bicycles welcome")},{id:"accessible-steephills",name:(0,c.t)("Steep hills")},{id:"accessible-uneven",name:(0,c.t)("Wear sensible shoes (uneven terrain)")},{id:"accessible-busy",name:(0,c.t)("Busy sidewalks")},{id:"accessible-bicyclesonly",name:(0,c.t)("Bicycles only")},{id:"accessible-lowlight",name:(0,c.t)("Low light or nighttime")},{id:"accessible-seniors",name:(0,c.t)("Senior Friendly")}],u=function(e){function t(){return n(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this;return React.createElement("fieldset",{id:"accessibilities"},React.createElement("legend",{className:"required-legend"},(0,c.t)("How accessible is this walk?")),React.createElement("fieldset",null,s.map(function(t){return React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:e.linkParentState(t.id)}),t.name)})))}}]),t}(React.Component);t["default"]=u,Object.assign(u.prototype,o.linkedParentState)},function(e,t,a){"use strict";function n(e,t){var a=t.value,n=t.onChange,r=t.index;return{value:a[e],onChange:function(t){return n(e,t.target.value,r)}}}function r(e){var t=e.values,a=e.onChange;return t.map(function(e,t){var n=void 0;e.phone=e.phone||"";var r={key:t,index:t,value:e,onChange:function(){return a},onDelete:function(){return l(t,a)}};return"you"===e.type?n=React.createElement(u,r):"leader"===e.type?n=React.createElement(m,r):"organizer"===e.type?n=React.createElement(f,r):"community"===e.type?n=React.createElement(d,r):"volunteer"===e.type&&(n=React.createElement(p,r)),n})}function i(e,t,a){var n=e.slice();n.push(t),a(n)}function l(e,t,a){var n=e.slice();n.splice(t,1),a(n)}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};Object.defineProperty(t,"__esModule",{value:!0});var c=a(20),s={leader:{"name-first":"","name-last":"",bio:"",primary:"",twitter:"",facebook:"",website:"",email:"",phone:""},organizer:{"name-first":"","name-last":"",institution:"",website:""},community:{"name-first":"","name-last":"",bio:"",twitter:"",facebook:"",website:""},volunteer:{"name-first":"","name-last":"",role:"",website:""}};t["default"]=function(e){var t=e.team,a=e.onChange;return React.createElement("div",{className:"tab-pane",id:"team"},React.createElement("div",{className:"page-header","data-section":"team"},React.createElement("h1",null,(0,c.t)("Build Your Team"))),r({values:t,onChange:a}),React.createElement("div",{id:"add-member"},React.createElement("h2",null,(0,c.t)("Who else is involved with this walk?")),React.createElement("h3",{className:"lead"},(0,c.t)("Click to add team members to your walk")," (",(0,c.t)("Optional"),")"),React.createElement("div",{className:"team-set"},React.createElement("div",{className:"team-row"
},React.createElement("section",{className:"new-member",id:"new-walkleader",title:"Add New Walk Leader",onClick:function(){return i(t,s.leader,a)}},React.createElement("div",{className:"icon"}),React.createElement("h4",{className:"title text-center"},(0,c.t)("Walk Leader")),React.createElement("p",null,(0,c.t)("A person presenting information, telling stories, and fostering discussion during the Jane's Walk."))),React.createElement("section",{className:"new-member",id:"new-walkorganizer",title:"Add New Walk Organizer",onClick:function(){return i(t,s.organizer,a)}},React.createElement("div",{className:"icon"}),React.createElement("h4",{className:"title text-center"},(0,c.t)("Walk Organizer")),React.createElement("p",null,(0,c.t)("A person responsible for outreach to new and returning Walk Leaders and Community Voices.")))),React.createElement("div",{className:"team-row"},React.createElement("section",{className:"new-member",id:"new-communityvoice",title:"Add A Community Voice",onClick:function(){return i(t,s.community,a)}},React.createElement("div",{className:"icon"}),React.createElement("h4",{className:"title text-center"},(0,c.t)("Community Voice")),React.createElement("p",null,(0,c.t)("A community member with stories and/or personal experiences to share."))),React.createElement("section",{className:"new-member",id:"new-othermember",title:"Add another helper to your walk",onClick:function(){return i(t,s.volunteer,a)}},React.createElement("div",{className:"icon"}),React.createElement("h4",{className:"title text-center"},(0,c.t)("Volunteers")),React.createElement("p",null,(0,c.t)("Other people who are helping to make your walk happen.")))))))};var u=function(e){return React.createElement("fieldset",{className:"team-member walk-owner"},React.createElement("span",null,React.createElement("legend",null,(0,c.t)("You"))),React.createElement("fieldset",{className:"name item required"},React.createElement("label",null,(0,c.t)("Name")),React.createElement("input",o({type:"text",placeholder:"First"},n("name-first",e))),React.createElement("input",o({type:"text",placeholder:"Last"},n("name-last",e)))),React.createElement("fieldset",{className:"role item required"},React.createElement("label",null,(0,c.t)("Role")),React.createElement("select",n("role",e),React.createElement("option",{defaultValue:"walk-leader"},(0,c.t)("Walk Leader")),React.createElement("option",{defaultValue:"co-walk-leader"},(0,c.t)("Co-Walk Leader")),React.createElement("option",{defaultValue:"walk-organizer"},(0,c.t)("Walk Organizer")))),React.createElement("fieldset",{className:"item"},React.createElement("label",{className:"checkbox"},React.createElement("input",o({type:"checkbox",className:"role-check"},n("primary",e))),(0,c.t)("Primary Walk Leader"))),React.createElement("fieldset",{className:"item required"},React.createElement("label",{htmlFor:"bio"},(0,c.t)("Introduce yourself")),React.createElement("p",{className:"alert alert-info"},(0,c.t)("We recommend keeping your bio under 60 words")),React.createElement("textarea",o({rows:"6"},n("bio",e)))),React.createElement("fieldset",{className:"contact"},React.createElement("fieldset",{className:"item"},React.createElement("label",null,React.createElement("i",{className:"fa fa-envelope"})," ",(0,c.t)("Email")),React.createElement("input",o({type:"email",placeholder:""},n("email",e)))),React.createElement("fieldset",{className:"item"},React.createElement("label",{htmlFor:"leader-twitter"},React.createElement("i",{className:"fa fa-twitter"})," Twitter"),React.createElement("div",{className:"input-group"},React.createElement("span",{className:"input-group-addon"},"@"),React.createElement("input",o({className:"col-md-12",type:"text",placeholder:"Username"},n("twitter",e)))))),React.createElement("fieldset",{className:"social"},React.createElement("fieldset",{className:"item"},React.createElement("label",{htmlFor:"facebook"},React.createElement("i",{className:"fa fa-facebook-square"})," Facebook"),React.createElement("input",o({type:"text",placeholder:""},n("facebook",e)))),React.createElement("fieldset",{className:"item"},React.createElement("label",{htmlFor:"website"},React.createElement("i",{className:"fa fa-link"})," ",(0,c.t)("Website")),React.createElement("input",o({type:"text",placeholder:""},n("website",e))))),React.createElement("hr",null),React.createElement("section",{className:"private"},React.createElement("h4",null,(0,c.t)("We'll keep this part private")),React.createElement("p",{className:"alert alert-info"},(0,c.t)("We'll use this information to contact you about your walk submission. We wont share this information with 3rd parties.")),React.createElement("fieldset",{className:"tel required"},React.createElement("label",null,React.createElement("i",{className:"fa fa-phone-square"}),(0,c.t)("Phone Number")),React.createElement("input",o({type:"tel",maxLength:"18",placeholder:""},n("phone",e))))))},m=function(e){return React.createElement("fieldset",{className:"team-member walk-leader clearfix"},React.createElement("legend",null,(0,c.t)("Walk Leader")),React.createElement("div",null,React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"name"},(0,c.t)("Name")),React.createElement("div",{className:"item"},React.createElement("form",{className:"form-inline"},React.createElement("input",o({type:"text",placeholder:"First"},n("name-first",e))),React.createElement("input",o({type:"text",placeholder:"Last"},n("name-last",e)))))),React.createElement("div",{className:"item"},React.createElement("label",{className:"checkbox"},React.createElement("input",o({type:"checkbox",className:"role-check"},n("primary",e))),(0,c.t)("Primary Walk Leader"))),React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"bio"},(0,c.t)("Introduce the walk leader")),React.createElement("div",{className:"alert alert-info"},(0,c.t)("We recommend keeping the bio under 60 words")),React.createElement("textarea",o({className:"col-md-12",rows:"6"},n("bio",e)))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"prependedInput"},React.createElement("i",{className:"fa fa-twitter"})," Twitter"),React.createElement("div",{className:"input-prepend"},React.createElement("span",{className:"add-on"},"@"),React.createElement("input",o({className:"col-md-12",type:"text",placeholder:"Username"},n("twitter",e))))),React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"facebook"},React.createElement("i",{className:"fa fa-facebook-square"})," Facebook"),React.createElement("input",o({type:"text",placeholder:""},n("facebook",e))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"website"},React.createElement("i",{className:"fa fa-link"}),(0,c.t)("Website")),React.createElement("input",o({type:"text",placeholder:""},n("website",e))))),React.createElement("hr",null),React.createElement("h4",null,(0,c.t)("Private")),React.createElement("div",{className:"alert alert-info"},(0,c.t)("We'll use this information to contact you about your walk submission. We wont share this information with 3rd parties.")),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6 required"},React.createElement("label",{htmlFor:"email"},React.createElement("i",{className:"fa fa-envelope"}),(0,c.t)("Email")),React.createElement("input",o({type:"email",placeholder:"Email"},n("email",e)))),React.createElement("div",{className:"col-md-6 tel"},React.createElement("label",{htmlFor:"phone"},React.createElement("i",{className:"fa fa-phone-square"}),(0,c.t)("Phone Number")),React.createElement("input",o({type:"tel",maxLength:"16",placeholder:""},n("phone",e)))))),React.createElement("footer",null,React.createElement("button",{className:"btn remove-team-member",onClick:e.onDelete},(0,c.t)("Remove Team Member"))))},f=function(e){return React.createElement("fieldset",{className:"team-member walk-organizer"},React.createElement("legend",null,(0,c.t)("Walk Organizer")),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-9"},React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"name"},(0,c.t)("Name")),React.createElement("form",{className:"form-inline"},React.createElement("input",o({type:"text",placeholder:"First"},n("name-first",e))),React.createElement("input",o({type:"text",placeholder:"Last"},n("name-last",e))))),React.createElement("label",{htmlFor:"affiliation"},(0,c.t)("Affilated Institution")," (",(0,c.t)("Optional"),")"),React.createElement("input",o({type:"text",placeholder:"e.g. City of Toronto"},n("institution",e))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"website"},React.createElement("i",{className:"fa fa-link"}),(0,c.t)("Website")),React.createElement("input",o({type:"text",className:"col-md-12",placeholder:""},n("website",e))))))),React.createElement("footer",null,React.createElement("button",{className:"btn remove-team-member",onClick:e.onDelete},(0,c.t)("Remove Team Member"))))},d=function(e){return React.createElement("fieldset",{className:"team-member community-voice"},React.createElement("legend",null,(0,c.t)("Community Voice")),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-9"},React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"name"},(0,c.t)("Name")),React.createElement("form",{className:"form-inline"},React.createElement("input",o({type:"text",placeholder:"First"},n("name-first",e))),React.createElement("input",o({type:"text",placeholder:"Last"},n("name-last",e))))),React.createElement("div",{className:"item"},React.createElement("label",{htmlFor:"bio"},(0,c.t)("Tell everyone about this person")),React.createElement("div",{className:"alert alert-info"},(0,c.t)("We recommend keeping the bio under 60 words")),React.createElement("textarea",o({className:"col-md-12",rows:"6"},n("bio",e)))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"prependedInput"},React.createElement("i",{className:"fa fa-twitter"})," Twitter"),React.createElement("div",{className:"input-prepend"},React.createElement("span",{className:"add-on"},"@"),React.createElement("input",o({className:"col-md-12",type:"text",placeholder:"Username"},n("twitter",e))))),React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"facebook"},React.createElement("i",{className:"fa fa-facebook-square"})," Facebook"),React.createElement("input",o({type:"text",placeholder:""},n("facebook",e))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"website"},React.createElement("i",{className:"fa fa-link"}),(0,c.t)("Website")),React.createElement("input",o({type:"text",className:"col-md-12",placeholder:""},n("website",e))))))),React.createElement("footer",null,React.createElement("button",{className:"btn remove-team-member",onClick:e.onDelete},(0,c.t)("Remove Team Member"))))},p=function(e){return React.createElement("div",{className:"thumbnail team-member othermember"},React.createElement("fieldset",null,React.createElement("legend",null,(0,c.t)("Volunteers")),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-9"},React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"name"},(0,c.t)("Name")),React.createElement("form",{className:"form-inline"},React.createElement("input",o({type:"text",placeholder:"First"},n("name-first",e))),React.createElement("input",o({type:"text",placeholder:"Last"},n("name-last",e))))),React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"role"},(0,c.t)("Role")),React.createElement("input",o({type:"text"},n("role",e)))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"website"},React.createElement("i",{className:"fa fa-link"}),(0,c.t)("Website")),React.createElement("input",o({type:"text",className:"col-md-12",placeholder:""},n("website",e)))))))),React.createElement("footer",null,React.createElement("button",{className:"btn remove-team-member",onClick:e.onDelete},(0,c.t)("Remove Team Member"))))}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=a(20),c=function(e){function t(e){n(this,t);var a=r(this,Object.getPrototypeOf(t).call(this,e));return a.state={eventbrite:!(!e.mirrors||!e.mirrors.eventbrite)},a}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;$(React.findDOMNode(this)).modal(),$(React.findDOMNode(this)).bind("hidden.bs.modal",function(){return e.props.close()})}},{key:"handlePublish",value:function(){var e=this;this.props.saveWalk({publish:!0},function(){return window.location=e.props.url})}},{key:"render",value:function(){var e=this,t=void 0;return this.props.city.mirrors.indexOf("eventbrite")>-1&&(t=React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkState("eventbrite")}),(0,o.t)("Publish walk to EventBrite"))),React.createElement("dialog",{id:"publish-warning"},React.createElement("div",null,React.createElement("article",null,React.createElement("header",null,React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-hidden":"true"},"×"),React.createElement("h3",null,(0,o.t)("Okay, You're Ready to Publish"))),React.createElement("div",{className:"modal-body"},React.createElement("p",null,(0,o.t)("Just one more thing! Once you hit publish your walk will be live on Jane's Walk right away. You can return at any time to make changes.")),t),React.createElement("footer",null,React.createElement("div",{className:"pull-left"},React.createElement("a",{className:"walkthrough close","data-dismiss":"modal",onClick:this.props.close.bind(this)}," ",(0,o.t)("Bring me back to edit"))),React.createElement("a",null,React.createElement("button",{className:"btn btn-primary walkthrough","data-step":"publish-confirmation",onClick:function(){return e.handlePublish()}},(0,o.t)("Publish")))))))}}]),t}(React.Component);t["default"]=c,Object.assign(c.prototype,React.addons.LinkedStateMixin)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(20),r=function(e){return React.createElement("div",{className:"text-area-limit"},React.createElement("textarea",e),React.createElement("span",null,(0,n.t2)("%s character remaining","%s characters remaining",e.maxLength-e.valueLink.value.length)))};t["default"]=r},function(e,t){e.exports={name:"",shortDescription:"",longDescription:"",accessibleInfo:"",accessibleTransit:"",accessibleParking:"",accessibleFind:"",map:{markers:[],route:[]},team:[{id:-1,type:"you","name-first":"","name-last":"",role:"walk-leader",primary:"on",bio:"",twitter:"",facebook:"",website:"",email:"",phone:""}],time:{type:"",slots:[]},thumbnails:[],wards:"",checkboxes:{},notifications:[],mirrors:{},url:""}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var c=a(16),s=n(c),u=a(13),m=a(55),f=n(m),d=a(56),p=n(d),h=a(57),y=n(h),v=a(58),b=(n(v),a(60)),g=n(b),E=a(61),R=n(E),k=a(62),w=n(k),_=a(63),N=n(_),T=a(64),C=n(T),O=a(66),P=n(O),j=function(e){var t=e.walk,a=e.page,n=e.city,r=s["default"].getItineraryList(),i=s["default"].getFavouriteList();return{walk:t,page:a,city:n,itinerary:r,favourites:i}},S=function(e){function t(e){var a;r(this,t);for(var n=arguments.length,l=Array(n>1?n-1:0),o=1;n>o;o++)l[o-1]=arguments[o];var c=i(this,(a=Object.getPrototypeOf(t)).call.apply(a,[this,e].concat(l)));return c.state=j(e),c._onChange=c._onChange.bind(c),c}return l(t,e),o(t,[{key:"componentWillMount",value:function(){s["default"].addChangeListener(this._onChange)}},{key:"componentWillUnmount",value:function(){s["default"].removeChangeListener(this._onChange)}},{key:"_onChange",value:function(){this.setState(j)}},{key:"render",value:function(){var e=this.state,t=e.walk,a=(e.page,e.city),n=e.itinerary,r=e.favourites,i=!1,l=!1;return t&&t.map&&(i=t.map.markers.length>0,l=t.map.route.length>0),React.createElement("section",{className:"walkPage"},React.createElement(f["default"],{walk:t,city:a,itinerary:n,favourites:r,onAdd:function(e,a){return(0,u.add)(e,t,a)},onRemove:function(e,a){return(0,u.remove)(e,t,a)}}),React.createElement(C["default"],this.state),React.createElement(p["default"],this.state.walk),i||l?React.createElement(P["default"],{map:this.state.walk.map}):null,i?React.createElement(y["default"],this.state.walk):null,i?React.createElement(w["default"],this.state.walk):null,React.createElement(g["default"],this.state.walk),React.createElement(R["default"],this.state.walk),React.createElement(N["default"],this.state.walk))}}]),t}(React.Component);t["default"]=S,S.propsType={page:React.PropTypes.object.isRequired,walk:React.PropTypes.object.isRequired}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var a=t.thumbnails[0]&&t.thumbnails[0].url||e.background,n=void 0;return n=a?"url("+a+")":"#eaeaea",{backgroundImage:n,backgroundSize:"cover",backgroundPosition:"50%"}}function i(e){return e&&e.markers&&e.markers.length?e.markers[0].title:void 0}Object.defineProperty(t,"__esModule",{value:!0});var l=a(24),o=n(l),c=a(19),s=(n(c),function(e){var t=e.city,a=e.walk,n=e.favourites,l=e.itinerary,c=e.onAdd,s=e.onRemove,u=a.title,m=a.map,f=a.time,d=a.team,p=(a.thumbnails,t.url),h=t.name,y=d.find(function(e){return"walk-leader"===e.role}),v=i(m),b=void 0;return b=n&&n.walks.has(a)?React.createElement("button",{className:"removeFavourite",onClick:function(){return s(n)}}):React.createElement("button",{className:"addFavourite",onClick:function(){return c(n)}}),React.createElement("section",{className:"walkHeader"},React.createElement("section",{className:"coverImage",style:r(t,a)},React.createElement("ul",{className:"breadcrumb"},React.createElement("li",null,React.createElement("a",{href:"/"},React.createElement("i",{className:"fa fa-home"}))),React.createElement("li",null,React.createElement("a",{href:p},h+" walks")),React.createElement("li",{className:"active"},u))),React.createElement("h1",null,u," ",b),v?React.createElement("h4",null,"meetingPlace"):null,React.createElement("h4",null,y?"Led By "+y["name-first"]+" "+y["name-last"]+" - ":null),React.createElement(o["default"],{itinerary:l,time:f,walk:a,onAdd:c,onRemove:s}))});s.propTypes={walk:React.PropTypes.object.isRequired,remove:React.PropTypes.func.isRequired,add:React.PropTypes.func.isRequired},s.defaultProps={remove:null,add:null},t["default"]=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){var t=e.longDescription;return React.createElement("section",{className:"walkDescription"},React.createElement("a",{name:"About This Walk"}),React.createElement("h2",null,React.createElement("span",{clasName:"topRule"},"About This Walk")),React.createElement("article",{dangerouslySetInnerHTML:{__html:t}}))};a.propTypes={longDescription:React.PropTypes.string.isRequired},t["default"]=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){var t=e.map;return React.createElement("section",{className:"walkRoute"},React.createElement("a",{name:"Walk Route"}),React.createElement("h2",null,"Walk Route"),React.createElement("ol",null,t.markers.map(function(e,t){return React.createElement("li",{key:t},React.createElement("h2",null,e.title),React.createElement("p",null,e.description))})))};a.propTypes={map:React.PropTypes.object.isRequired},t["default"]=a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(59),r=function(e){var t=e.checkboxes,a=Object.keys(t).filter(function(e){return e.includes("accessible-")});return React.createElement("section",{className:"walkAccessibility"},React.createElement("h2",null,"Accessibility"),React.createElement("ul",null,a.map(function(e,t){return React.createElement("li",{key:t},(0,n.getAccessibleName)(e))})))};r.propTypes={checkboxes:React.PropTypes.array.isRequired},t["default"]=r},function(e,t){"use strict";function a(e){return(n[e.slice(11)]||{name:""}).name}Object.defineProperty(t,"__esModule",{value:!0}),t.getAccessibleName=a;var n=t.icons={familyfriendly:{name:"Family friendly",icon:""},wheelchair:{name:"Wheelchair accessible",icon:""},dogs:{name:"Dogs welcome",icon:""},strollers:{name:"Strollers welcome",icon:""},bicycles:{name:"Bicycles welcome",icon:""},steephills:{name:"Steep hills",icon:""},uneven:{name:"Uneven terrain",icon:""},busy:{name:"Busy sidewalks",icon:""},bicyclesonly:{name:"Bicycles only",icon:""},lowlight:{name:"Low light or nighttime",icon:""},seniors:{name:"Senior Friendly",icon:""}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){var t=e.accessibleTransit;return t&&t.length>0?React.createElement("section",{className:"walkPublicTransit"},React.createElement("a",{name:"Taking Public Transit"}),React.createElement("h2",null,"Taking Public Transit"),t):React.createElement("section",null)};a.propTypes={accessibleTransit:React.PropTypes.string.isRequired},t["default"]=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){var t=e.accessibleParking,a=e.style;return t&&t.length>0?React.createElement("section",{className:"walkParking "+a},"walk-page"===a?React.createElement("a",{name:"Parking Availability"}):null,React.createElement("a",{name:"Parking Availability"}),React.createElement("h2",null,"Parking Availability"),t):React.createElement("section",null)};a.propTypes={accessibleParking:React.PropTypes.string.isRequired},t["default"]=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){var t=e.accessibleFind;return React.createElement("section",{className:"walkStart"},React.createElement("a",{name:"How to find us"}),React.createElement("h2",null,"How to Find Us"),t)};a.propTypes={accessibleFind:React.PropTypes.string.isRequired},t["default"]=a},function(e,t){"use strict";function a(e){var t=e.member,a=n.filter(function(e){return t[e.name]});return React.createElement("div",{className:"btn-toolbar"},a.map(function(e,a){return React.createElement("a",{key:a,className:"btn",href:e.href+t[e.name],target:"_blank"},React.createElement("i",{className:e.style}))}))}Object.defineProperty(t,"__esModule",{value:!0});var n=[{name:"twitter",href:"http://twitter.com/",style:"fa fa-twitter"},{name:"facebook",href:"http://facebook.com/",style:"fa fa-facebook"},{name:"email",href:"mailto:",style:"fa fa-envelope-o"},{name:"website",href:"",style:"fa fa-globe"},{name:"phone",href:"",style:"fa fa-phone"}],r=function(e){var t=e.team,n=t.map(function(e,t){return React.createElement("article",{key:t},React.createElement("header",null,React.createElement("h3",null,(e["name-first"]+" "+e["name-last"]).trim(),", ",React.createElement("span",{className:"walkTeamMemberRole"},e.role)),React.createElement("footer",null,React.createElement(a,{member:e}))),React.createElement("summary",{dangerouslySetInnerHTML:{__html:e.bio}}))});return React.createElement("section",{className:"walkTeam"},React.createElement("a",{name:"About the Walk Team"}),React.createElement("h2",null,"About the Walk Team"),React.createElement("section",null,n))};r.propTypes={member:React.PropTypes.array.isRequired},t["default"]=r},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(18),i=a(58),l=(n(i),a(60)),o=(n(l),a(61)),c=(n(o),a(65)),s=[{display:"About This Walk",exists:!0},{display:"Walk Route",exists:!0},{display:"How to find us",exists:!0},{display:"Taking Public Transit",exists:!1},{display:"Parking Availability",exists:!1},{display:"About the Walk Team",exists:!0}],u=function(e){var t=e.walk,a=e.filters,n=t.checkboxes,i=t.title,l=t.map,o=t.time,u=t.team,m={data:{}};a&&(m=a.theme);var f=u.find(function(e){return"walk-leader"===e.role}),d=void 0,p=void 0,h=void 0;f&&(d=React.createElement("h6",null,"Led By ",f["name-first"]," ",f["name-last"]," ")),o.slots.length&&(p=React.createElement("h6",null,(0,r.dateFormatted)(o.slots[0][0]))),l.markers.length&&(h=React.createElement("h6",null,"Meeting at ",l.markers[0].title));var y=Object.keys(n).filter(function(e){return e.includes("theme")});return(t.accessibleTransit||[]).length>0&&(s[3].exists=!0),(t.accessibleParking||[]).length>0&&(s[4].exists=!0),React.createElement("section",{className:"walkMenu"},React.createElement("header",{className:"walkHeader"},React.createElement("h5",null,i),d,p,h),React.createElement("section",{className:"menu"},React.createElement("ul",null,s.filter(function(e){return e.exists}).map(function(e,t){return React.createElement("li",{key:t},React.createElement("a",{href:"#"+e.display},e.display))}))),React.createElement("section",{className:"tags"},y.map(function(e,t){return React.createElement("span",{className:"tag",key:t},"#",(0,c.getThemeName)(e))})))};u.propTypes={walk:React.PropTypes.object.isRequired},t["default"]=u},function(e,t){"use strict";function a(e){return(r[e.slice(6)]||{name:""}).name}function n(e){return"fa-"+(r[e.slice(6)]||{icon:""}).icon}Object.defineProperty(t,"__esModule",{value:!0}),t.getThemeName=a,t.getThemeIcon=n;var r=t.icons={"civic-activist":{name:"Activism",icon:"bullhorn"},"civic-commerce":{name:"Commerce",icon:"shopping-cart"},"civic-gender":{name:"Gender",icon:"unlock-alt"},"civic-goodneighbour":{name:"Community",icon:"group"},"civic-health":{name:"Health",icon:"medkit"},"civic-international":{name:"International Issues",icon:"globe"},"civic-military":{name:"Military",icon:"fighter-jet"},"civic-nativeissues":{name:"Native Issues",icon:"sun-o"},"civic-religion":{name:"Religion",icon:"bell"},"civic-truecitizen":{name:"Citizenry",icon:"flag-o"},"culture-aesthete":{name:"Design",icon:"pencil"},"culture-artist":{name:"Art",icon:"picture-o"},"culture-bookworm":{name:"Literature",icon:"book"},"culture-foodie":{name:"Food",icon:"cutlery"},"culture-historybuff":{name:"Heritage",icon:"archive"},"culture-nightowl":{name:"Night Life",icon:"glass"},"culture-techie":{name:"Technology",icon:"gears"},"culture-writer":{name:"Storytelling",icon:"edit"},"nature-greenthumb":{name:"Gardening",icon:"leaf"},"nature-naturelover":{name:"Nature",icon:"bug"},"nature-petlover":{name:"Animals",icon:"heart"},"urban-architecturalenthusiast":{name:"Architecture",icon:"building"},"urban-film":{name:"Film",icon:"video-camera"},"urban-moversandshakers":{name:"Transportation",icon:"truck"},"urban-music":{name:"Music",icon:"music"},"urban-play":{name:"Play",icon:"puzzle-piece"},"urban-sports":{name:"Sports",icon:"trophy"},"urban-suburbanexplorer":{name:"Suburbs",icon:"home"},"urban-water":{name:"Water",icon:"tint"}}},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){var a=new google.maps.LatLngBounds;google.maps.event.trigger(e,"resize"),t.forEach(function(e){return a.extend(e.getPosition())}),e.fitBounds(a);var n=google.maps.event.addListener(e,"bounds_changed",function(){e.getZoom()>17&&e.setZoom(17),google.maps.event.removeListener(n)})}var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o={url:CCM_THEME_PATH+"/images/marker.png",size:new google.maps.Size(30,46),origin:new google.maps.Point(0,0),labelOrigin:new google.maps.Point(11,17),anchor:new google.maps.Point(11,44)},c=function(e){function t(e){var r;a(this,t);for(var i=arguments.length,l=Array(i>1?i-1:0),o=1;i>o;o++)l[o-1]=arguments[o];var c=n(this,(r=Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(l)));return c.state={googleMap:null},c}return r(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props.map,t=new google.maps.LatLng(e.markers[0].lat,e.markers[0].lng),a=[],n={center:t,scrollwheel:!1,backgroundColor:"#d7f0fa"},r=new google.maps.Map(React.findDOMNode(this),n);r.mapTypes.set("map_style",new google.maps.StyledMapType([{featureType:"poi.park",elementType:"geometry.fill",stylers:[{visibility:"on"},{saturation:37}]},{featureType:"landscape",stylers:[{visibility:"on"},{color:"#eaeaea"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"poi.park",stylers:[{visibility:"on"},{color:"#cadfaa"}]},{featureType:"poi.school",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.school",elementType:"geometry",stylers:[{visibility:"on"},{color:"#dadada"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{visibility:"simplified"},{color:"#90c2ff"}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"simplified"},{color:"#ffffff"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]}])),r.setMapTypeId("map_style");new google.maps.Polyline({strokeColor:"#F16725",strokeOpacity:.8,strokeWeight:3,path:e.route,map:r});e.markers.forEach(function(e,t){var n=new google.maps.LatLng(e.lat,e.lng),i=new google.maps.Marker({position:n,style:"stop",icon:o,map:r,label:{text:(t+1).toString(),fontWeight:"700",fontSize:"16px",color:"#ffffff"}});google.maps.event.addListener(i,"click",function(){r.panTo(i.getPosition())}),a.push(i)}),i(r,a),this.setState({
googleMap:r})}},{key:"render",value:function(){return React.createElement("div",{className:"walkMap"})}}]),t}(React.Component);t["default"]=c,c.PropTypes={map:React.PropTypes.object.isRequired}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(){return{walks:R["default"].getWalks(),users:y["default"].getUsers(),city:b["default"].getCity()}}var c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var s=a(68),u=n(s),m=a(69),f=n(m),d=a(70),p=n(d),h=a(29),y=n(h),v=a(79),b=n(v),g=a(16),E=(n(g),a(19)),R=n(E),k=function(e){function t(){var e;r(this,t);for(var a=arguments.length,n=Array(a),l=0;a>l;l++)n[l]=arguments[l];var c=i(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return c.state=o(),c._onChange=c._onChange.bind(c),c}return l(t,e),c(t,[{key:"componentWillMount",value:function(){y["default"].addChangeListener(this._onChange),R["default"].addChangeListener(this._onChange),b["default"].addChangeListener(this._onChange)}},{key:"componentWillUnmount",value:function(){y["default"].removeChangeListener(this._onChange),R["default"].removeChangeListener(this._onChange),b["default"].removeChangeListener(this._onChange)}},{key:"_onChange",value:function(){this.setState(o)}},{key:"render",value:function(){var e=this.props.user,t=this.state,a=t.city,n=t.walks,r=t.users;return React.createElement("section",{className:"dashboard"},React.createElement(u["default"],{user:e}),React.createElement(f["default"],{walks:n,users:r,city:a}),React.createElement(p["default"],{city:a,walks:n,year:2015,leaders:[1,2],participants:[5,6]}))}}]),t}(React.Component);t["default"]=k},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){var t=e.user;return React.createElement("header",null,React.createElement("h3",null,t.firstName.toUpperCase()," Organizer Dashboard"),React.createElement("h4",null,"Hi, ",t.firstName+"!"," "),React.createElement("section",{className:"dashboardLatestPost"},React.createElement("h4",null,"New User Dashboard!"),React.createElement("h5",null,"Feb 9th, 2016"),React.createElement("p",null,"Jane's Walk Leaders and City Organizers now have a whole new dashboard. We're making it easier and simpler to organize your city, and your walks. Look here for more updates soon.")))};a.PropTypes={user:React.PropTypes.object.isRequired},t["default"]=a},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&o["return"]&&o["return"]()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var s=a(70),u=(n(s),a(71)),m=(n(u),a(72)),f=(n(m),a(73)),d=n(f),p=a(77),h=(n(p),function(e){function t(e){var a;r(this,t);for(var n=arguments.length,l=Array(n>1?n-1:0),o=1;n>o;o++)l[o-1]=arguments[o];var c=i(this,(a=Object.getPrototypeOf(t)).call.apply(a,[this,e].concat(l)));return c.state={menuItems:[[d["default"],"Walks",!1]]},c}return l(t,e),c(t,[{key:"toggleSection",value:function(e){var t=this.state.menuItems.slice();t[e][2]=!t[e][2],this.setState({menuItems:t})}},{key:"render",value:function(){var e=this,t=this.state.menuItems,a=this.props,n=a.walks,r=a.city,i=t.map(function(t,a){var i=o(t,3),l=i[0],c=i[1],s=i[2];return React.createElement("section",null,React.createElement("li",{key:a,className:s?"activeMenuItem":null,onClick:function(){return e.toggleSection(a)}},React.createElement("i",{className:"icon-caret-right"})," ",c),React.createElement(l,{walks:n,city:r}))});return React.createElement("section",{className:"dashboardMenu"},React.createElement("ul",null,i))}}]),t}(React.Component));t["default"]=h},function(e,t,a){"use strict";var n=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&o["return"]&&o["return"]()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(t,"__esModule",{value:!0});var r=a(20),i=function(e){var t=e.city,a=e.walks,i=0,l=0,o=2015,c={},s=!0,u=!1,m=void 0;try{for(var f,d=a[Symbol.iterator]();!(s=(f=d.next()).done);s=!0){var p=n(f.value,2),h=(p[0],p[1]),y=h.team&&h.team[0];if(y){var v=y.email||y.firstName+y.lastName;c[v]=(c[v]||0)+1}h.time&&(l+=h.time.slots.length)}}catch(b){u=!0,m=b}finally{try{!s&&d["return"]&&d["return"]()}finally{if(u)throw m}}return i=Object.keys(c).length,React.createElement("section",{className:"dashboardRecap"},React.createElement("h2",null,"Recap"),React.createElement("h4",null,"In ",t.name,", ",(0,r.t2)("%d walk leader","%d walk leaders",i)+" "+(0,r.t2)("led %d walk","led %d walks",l)+" "+(0,r.t)("since its first Jane's Walk in %d,",o)+"."))};i.defaultProps={city:{name:"your city"}},t["default"]=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(20),r={cityOrganizers:[{id:2627,photo:"/files/avatars/2627.jpg?1450825591",firstName:"Kate",lastName:"Watanabe",email:"kate.watanabe@janeswalk.org",facebook:"",twitter:"",website:"",cityName:"Toronto"},{id:2627,photo:"/files/avatars/2627.jpg?1450825591",firstName:"Kate",lastName:"Watanabe",email:"kate.watanabe@janeswalk.org",facebook:"",twitter:"",website:"",cityName:"Toronto"},{id:2627,photo:"/files/avatars/2627.jpg?1450825591",firstName:"Kate",lastName:"Watanabe",email:"kate.watanabe@janeswalk.org",facebook:"",twitter:"",website:"",cityName:"Toronto"}],videoTips:["//player.vimeo.com/video/91185841","//player.vimeo.com/video/91185841","//player.vimeo.com/video/91185841"],files:[{url:"http://www.janeswalk.org/old/index.php/download_file/view/253/299/",name:"Vector Logo"},{url:"http://www.janeswalk.org/old/index.php/download_file/view/253/299/",name:"Vector Logo"},{url:"http://www.janeswalk.org/old/index.php/download_file/view/253/299/",name:"Vector Logo"}]},i=function(){var e=r.cityOrganizers,t=r.videoTips,a=r.files,i=(void 0).props.walks.slice(3);return React.createElement("section",{className:"dashboardResources"},React.createElement("section",{className:"walkOrganizers"},React.createElement("h3",null,"Connect with Fellow organizers"),"Got a question? Reach out to a fellow City Organizer for help.",React.createElement("ul",null,e.map(function(e,t){return React.createElement("li",{key:t},e.firstName+" from "+e.cityName+": "+e.email)}))),React.createElement("section",{className:"globalWalks resourceBlock"},React.createElement("h3",null,"Walks from around the world"),(0,n.t)("Don't know what kind of walk to lead? Here are some fun ones from around the world."),React.createElement("ul",null,i.map(function(e,t){return React.createElement("li",{key:t,className:"funWalksFromAroundWorld"},React.createElement("a",{href:e.url,className:"walkImage"},React.createElement("img",{src:"http://janeswalk.org/"+e.thumbnailUrl})),React.createElement("span",{className:"flag"},React.createElement("img",{src:"http://janeswalk.org/themes/janeswalk/images/countryFlags/Canada.png"})),React.createElement("div",null,React.createElement("a",{href:e.url},e.title,"}"),React.createElement("h4",null,"Toronto, ON")))}))),React.createElement("section",{className:"walkTips vimeos resourceBlock"},React.createElement("h3",null,(0,n.t)("Tips on leading a walk")),(0,n.t)("Leading your first or fifth walk? Here are some tips from the Jane's Walk crew!"),React.createElement("ul",null,t.map(function(e,t){return React.createElement("li",{key:t},React.createElement("div",{className:"embed-container"},React.createElement("iframe",{src:e,frameborder:"0",webkitallowfullscreen:!0,mozallowfullscreen:!0,allowfullscreen:!0})))}))),React.createElement("section",{className:"files"},React.createElement("h3",null,"Files"),(0,n.t)("Want help promoting Jane's Walk?"),(0,n.t)("Use these files to promote Jane's Walk in your city"),React.createElement("ul",null,a.map(function(e,t){return React.createElement("li",{key:t},React.createElement("a",{href:e.url},e.name,"}"))}))))};t["default"]=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e=DashboardStore.getMyBlogPosts().map(function(e,t){return React.createElement("li",{key:t},React.createElement("a",{href:e.url},React.createElement("h3",null,e.name),React.createElement("button",null,React.createElement("a",{href:""},"Promote"))))});return React.createElement("ul",{className:"dashboardMyBlogPosts"},e)};t["default"]=a},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t,a){var n=Object.assign({},e);return n[t]=Object.assign({},e[t]),delete n[t][a],n}function c(e,t,a){var n=Object.assign({},e);return n[t]=Object.assign({},e[t]),n[t][a]=!n[t][a],n}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=a(74),m=n(u),f=a(75),d=n(f),p=a(76),h=n(p),y={theme:{name:"Theme",data:{"civic-activist":"Activism","nature-petlover":"Animals","urban-architecturalenthusiast":"Architecture","culture-artist":"Art","civic-truecitizen":"Citizenry","civic-commerce":"Commerce","civic-goodneighbour":"Community","culture-aesthete":"Design","urban-film":"Film","culture-foodie":"Food","nature-greenthumb":"Gardening","civic-gender":"Gender","civic-health":"Health","culture-historybuff":"Heritage","civic-international":"International Issues","culture-bookworm":"Literature","civic-military":"Military","urban-music":"Music","civic-nativeissues":"Native Issues","nature-naturelover":"Nature","culture-nightowl":"Night Life","urban-play":"Play","civic-religion":"Religion","urban-sports":"Sports","culture-writer":"Storytelling","urban-suburbanexplorer":"Suburbs","culture-techie":"Technology","urban-moversandshakers":"Transportation","urban-water":"Water"}},ward:{name:"Region",data:{"Ward 1 Etobicoke North":"Ward 1 Etobicoke North","Ward 2 Etobicoke North":"Ward 2 Etobicoke North","Ward 3 Etobicoke Centre":"Ward 3 Etobicoke Centre","Ward 4 Etobicoke Centre":"Ward 4 Etobicoke Centre","Ward 5 Etobicoke-Lakeshore":"Ward 5 Etobicoke-Lakeshore","Ward 6 Etobicoke-Lakeshore":"Ward 6 Etobicoke-Lakeshore","Ward 7 York West":"Ward 7 York West","Ward 8 York West":"Ward 8 York West","Ward 9 York Centre":"Ward 9 York Centre","Ward 10 York Centre":"Ward 10 York Centre","Ward 11 York South-Weston":"Ward 11 York South-Weston","Ward 12 York South-Weston":"Ward 12 York South-Weston","Ward 13 Parkdale-High Park":"Ward 13 Parkdale-High Park","Ward 14 Parkdale-High Park":"Ward 14 Parkdale-High Park","Ward 15 Eglinton-Lawrence":"Ward 15 Eglinton-Lawrence","Ward 16 Eglinton-Lawrence":"Ward 16 Eglinton-Lawrence","Ward 17 Davenport":"Ward 17 Davenport","Ward 18 Davenport":"Ward 18 Davenport","Ward 19 Trinity-Spadina":"Ward 19 Trinity-Spadina","Ward 20 Trinity-Spadina":"Ward 20 Trinity-Spadina","Ward 21 St. Pauls":"Ward 21 St. Pauls","Ward 22 St. Pauls":"Ward 22 St. Pauls","Ward 23 Willowdale":"Ward 23 Willowdale","Ward 24 Willowdale":"Ward 24 Willowdale","Ward 25 Don Valley West":"Ward 25 Don Valley West","Ward 26 Don Valley West":"Ward 26 Don Valley West","Ward 27 Toronto Centre-Rosedale":"Ward 27 Toronto Centre-Rosedale","Ward 28 Toronto Centre-Rosedale":"Ward 28 Toronto Centre-Rosedale","Ward 29 Toronto-Danforth":"Ward 29 Toronto-Danforth","Ward 30 Toronto-Danforth":"Ward 30 Toronto-Danforth","Ward 31 Beaches-East York":"Ward 31 Beaches-East York","Ward 32 Beaches-East York":"Ward 32 Beaches-East York","Ward 33 Don Valley East":"Ward 33 Don Valley East","Ward 34 Don Valley East":"Ward 34 Don Valley East","Ward 35 Scarborough Southwest":"Ward 35 Scarborough Southwest","Ward 36 Scarborough Southwest":"Ward 36 Scarborough Southwest","Ward 37 Scarborough Centre":"Ward 37 Scarborough Centre","Ward 38 Scarborough Centre":"Ward 38 Scarborough Centre","Ward 39 Scarborough-Agincourt":"Ward 39 Scarborough-Agincourt","Ward 40 Scarborough Agincourt":"Ward 40 Scarborough Agincourt","Ward 41 Scarborough-Rouge River":"Ward 41 Scarborough-Rouge River","Ward 42 Scarborough-Rouge River":"Ward 42 Scarborough-Rouge River","Ward 43 Scarborough East":"Ward 43 Scarborough East","Ward 44 Scarborough East":"Ward 44 Scarborough East"}},accessibility:{name:"Accessibility",data:{bicyclesonly:"Bicyiccles only",bicycles:"Bicycles welcome",busy:"Busy sidewalks",dogs:"Dogs welcome",familyfriendly:"Family friendly",lowlight:"Low light or nighttime",seniors:"Senior Friendly",steephills:"Steep hills",strollers:"Strollers welcome",uneven:"Uneven terrain",wheelchair:"Wheelchair accessible"}}},v=function(e){function t(e){var a;r(this,t);for(var n=arguments.length,l=Array(n>1?n-1:0),o=1;n>o;o++)l[o-1]=arguments[o];var c=i(this,(a=Object.getPrototypeOf(t)).call.apply(a,[this,e].concat(l)));return c.state={currentView:"list",filters:{}},c}return l(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.currentView,n=t.filterByDate,r=t.filters,i=this.props,l=i.walks,s=i.city,u=[];if("list"===a){var f=!0,p=!1,v=void 0;try{for(var b,g=l.values()[Symbol.iterator]();!(f=(b=g.next()).done);f=!0){var E=b.value,R=E.map,k=E.id,w=E.title,_=E.time,N=E.team,T=E.url,C={title:w,id:k,key:k,team:N,url:T};R&&R.markers.length&&(C.meeting=R.markers[0].title),_&&_.slots.length&&(C.start=_.slots[0][0]),u.push(React.createElement(h["default"],C))}}catch(O){p=!0,v=O}finally{try{!f&&g["return"]&&g["return"]()}finally{if(p)throw v}}}else"map"===a&&(u=React.createElement(d["default"],{walks:l,city:s}));var P=void 0;return P="future"===n?React.createElement("button",{className:"future"===n?"active":null,onClick:function(){return e.setState({filterByDate:"future"})}},"With Past Walks"):React.createElement("button",{className:"past"===n?"active":null,onClick:function(){return e.setState({filterByDate:"past"})}},"Without Past Walks"),React.createElement("div",{className:"walks"},React.createElement("button",{className:"walksListButton "+("list"===a?"active":null),onClick:function(){return e.setState({currentView:"list"})}},"List"),React.createElement("button",{className:"walksMapButton "+("map"===a?"active":null),onClick:function(){return e.setState({currentView:"map"})}},"Map"),P,s?React.createElement("a",{target:"_blank",href:"/profile/exportCity/"+s.id},React.createElement("button",null,"Export Spreadsheet")):null,React.createElement(m["default"],{allFilters:y,filters:r,removeFilter:function(t,a){return e.setState({filters:o(r,t,a)})},toggleFilter:function(t,a){return e.setState({filters:c(r,t,a)})}}),u)}}]),t}(React.Component);t["default"]=v},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){var t=e.name,a=e.handle,n=e.toggleFilter,r=e.removeFilter,i=e.options,l=(e.allFilters,e.filters),o=void 0;return Object.keys(l).includes(a)&&(o=Object.keys(l[a]).map(function(e){return React.createElement("button",{key:a,className:l[e]?"activeFilter":"inActiveFilter"},React.createElement("span",{className:"buttonToggle",onClick:function(){return n(e)}}," ",t," "),React.createElement("span",{className:"buttonClose",onClick:function(){return r(e)}}," × "))})),React.createElement("li",null,React.createElement("label",null),React.createElement("select",{value:"Select",onChange:function(e){return n(e.target.value)}},React.createElement("option",{value:""},t),Object.keys(i).map(function(e,t){return React.createElement("option",{key:t,value:e},i[e])})),React.createElement("section",null,o))},n=function(e){var t=e.filters,n=e.allFilters,r=e.removeFilter,i=e.toggleFilter,l=Object.keys(t).map(function(e){return React.createElement(a,{key:e,handle:e,options:t[e].data,filters:t,allFilters:n,toggleFilter:function(t){return i(e,t)},removeFilter:function(t){return r(e,t)}})});return React.createElement("div",{className:"walksFilter"},l)};t["default"]=n},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&o["return"]&&o["return"]()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){var t=e.url,a=e.title,n=e.shortDescription;return React.createElement("span",null,React.createElement("h4",null,React.createElement("a",{href:t},a)),React.createElement("p",null,n))},c=function(e,t,a){var n=new google.maps.InfoWindow({maxWidth:600}),r=document.createElement("div");return t=t.filter(function(e){var t=a.find(function(t){return t.id===e.walkId});return t?t:(e.setMap(null),!1)}),a.forEach(function(a){if(a.map&&a.map.markers&&a.map.markers.length){var i=a.map.markers[0],l=new google.maps.LatLng(i.lat,i.lng),c=t.find(function(e){return e.walkId===a.id});c||!function(){var i=new google.maps.Marker({position:l,style:"stop",map:e,walkId:a.id});t.push(i),google.maps.event.addListener(i,"click",function(){React.render(React.createElement(o,a),r),n.setMap(e),e.panTo(i.getPosition()),n.setContent(r),n.open(e,i)})}()}}),t},s=function(e){function t(e){var r;a(this,t);for(var i=arguments.length,l=Array(i>1?i-1:0),o=1;i>o;o++)l[o-1]=arguments[o];var c=n(this,(r=Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(l)));return c.state={googleMap:null,googleMapMarkers:[]},c}return r(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.state,a=t.googleMap,n=t.googleMapMarkers,r=e.walks;this.setState({googleMapMarkers:c(a,n,r),walks:r})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.city,a=e.walks,n=i(t.latlng,2),r=n[0],l=n[1],o=this.state.googleMapMarkers,s=new google.maps.LatLng(r,l),u={center:s,zoom:12,scrollwheel:!1,backgroundColor:"#d7f0fa"},m=new google.maps.Map(ReactDOM.findDOMNode(this),u);m.mapTypes.set("map_style",new google.maps.StyledMapType([{featureType:"poi.park",elementType:"geometry.fill",stylers:[{visibility:"on"},{saturation:37}]},{featureType:"landscape",stylers:[{visibility:"on"},{color:"#eaeaea"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"poi.park",stylers:[{visibility:"on"},{color:"#cadfaa"}]},{featureType:"poi.school",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.school",elementType:"geometry",stylers:[{visibility:"on"},{color:"#dadada"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{visibility:"simplified"},{color:"#90c2ff"}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"simplified"},{color:"#ffffff"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]}])),m.setMapTypeId("map_style"),this.setState({googleMap:m,googleMapMarkers:c(m,o,a)})}},{key:"render",value:function(){return React.createElement("div",{className:"walkMap",style:{width:"100%",height:"600px"}})}}]),t}(React.Component);t["default"]=s,s.PropTypes={walks:React.PropTypes.array.isRequired}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(18),r=function(e){var t=e.title,a=e.start,r=e.meeting,i=e.id,l=e.team,o=e.url;return React.createElement("li",{key:i},React.createElement("div",{className:1e3*a>Date.now()?"walk":"walk pastWalk"},React.createElement("h3",null,React.createElement("a",{href:o},t)),React.createElement("h4",null,(0,n.dateFormatted)(a)),l&&l.length?React.createElement("h4",null,"Led by ",l[0]["name-first"]+" "+l[0]["name-last"]," ",React.createElement("a",{href:"mailto:"+l[0].email},l[0].email)," "):null,React.createElement("h4",null,"Meeting at ",r),1e3*a>Date.now()?React.createElement("button",null,React.createElement("a",{href:""},"Promote")):null,React.createElement("button",null,React.createElement("a",{href:"/walk/form/?load="+o.split(".org")[1]},"Edit")),React.createElement("button",null,React.createElement("a",{href:""},"Unpublish"))))};r.propTypes={title:React.PropTypes.string,time:React.PropTypes.number,meeting:React.PropTypes.string,id:React.PropTypes.string.isRequired},r.defaultProps={title:"Walk Title",time:Date.now()},t["default"]=r},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var s=a(78),u=n(s),m=function(e){function t(e){var a;r(this,t);for(var n=arguments.length,l=Array(n>1?n-1:0),o=1;n>o;o++)l[o-1]=arguments[o];return i(this,(a=Object.getPrototypeOf(t)).call.apply(a,[this,e].concat(l)))}return l(t,e),c(t,[{key:"render",value:function(){var e=this.state,t=e.activeLeaders,a=e.filterByDate,n=e.sortBy,r=this.props.location,i=t.map(function(e,t){return React.createElement(u["default"],o({},e,{key:t}))});return React.createElement("section",{className:"dashboardWalkLeaders"},React.createElement("button",{className:"buttonAllWalks "+("all"===a?"active":null),onClick:function(){return filterLeadersByDate("all",r)}},"All Walks"),React.createElement("button",{className:"buttonUpcomingWalks "+("future"===a?"active":null),onClick:function(){return filterLeadersByDate("future",r)}},"Upcoming Walks Only"),React.createElement("button",{className:"buttonPastWalks "+("past"===a?"active":null),onClick:function(){return filterLeadersByDate("past",r)}},"Past Walks Only"),React.createElement("br",null),React.createElement("button",{className:"buttonSortAlphabetically "+("alpha"===n?"active":null),onClick:function(){return sortLeaders("alpha",r)}},"Sort Alphabetically by First Name"),React.createElement("button",{className:"buttonSortByMostWalks "+("count"===n?"active":null),onClick:function(){return sortLeaders("count",r)}},"Sort by Most Walks"),i)}}]),t}(React.Component);t["default"]=m,t["default"]=m},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){var t=e.firstName,a=e.lastName,n=e.walks,r=e.email,i=n.map(function(e,t){var a=new Date(1e3*e.time.slots[0][0]).getFullYear();return React.createElement("li",{key:t},React.createElement("a",{href:e.url},e.title)," (",a,")")});return React.createElement("li",null,React.createElement("div",{className:"walkLeader"},React.createElement("h3",null,"Walk Leader: ",t+" "+a," ",React.createElement("span",{className:"walkLeaderEmail"},React.createElement("a",{href:"mailto:"+r},r))),React.createElement("ul",null,React.createElement("h4",null,i))))};a.propTypes={firstName:React.PropTypes.string.isRequired,lastName:React.PropTypes.string.isRequired,walks:React.PropTypes.array.isRequired,email:React.PropTypes.string.isRequired},t["default"]=a},function(e,t,a){"use strict";function n(e){c=e}Object.defineProperty(t,"__esModule",{value:!0});var r=a(4),i=a(17),l=a(8),o="change",c=void 0,s=Object.assign({},i.EventEmitter.prototype,{emitChange:function(){this.emit(o)},addChangeListener:function(e){this.on(o,e)},removeChangeListener:function(e){this.removeListener(o,e)},getCity:function(){return c},dispatchToken:(0,r.register)(function(e){switch(e.type){case l.ActionTypes.CITY_RECEIVE:n(e.city)}s.emitChange()})});t["default"]=s},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=a(20),c=function(e){var t=e.success,a=e.msg,n=e.error;return React.createElement("div",{className:"alert alert-"+(t?"info":"danger")},a,n)},s=function(e){function t(){n(this,t);var e=r(this,Object.getPrototypeOf(t).call(this));return e.state={email:"",password:"",maintainLogin:!1,message:{}},e.handleReset=e.handleReset.bind(e),e.handleChangeEmail=e.handleChangeEmail.bind(e),e.handleChangePassword=e.handleChangePassword.bind(e),e.handleChangeMaintainLogin=e.handleChangeMaintainLogin.bind(e),e.handleSubmit=e.handleSubmit.bind(e),e}return i(t,e),l(t,[{key:"handleReset",value:function(e){var t=this;$.ajax({type:"POST",url:CCM_REL+"/login/forgot_password",data:{uEmail:this.state.email,uName:this.state.email,format:"JSON"},dataType:"json",success:function(e){return t.setState({message:e})}})}},{key:"handleChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleChangeMaintainLogin",value:function(e){this.setState({maintainLogin:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),$.ajax({type:"POST",url:CCM_REL+"/login/do_login",data:{uEmail:this.state.email,uName:this.state.email,uPassword:this.state.password,uMaintainLogin:this.state.maintainLogin,format:"JSON"},dataType:"json",success:function(e){t.setState({message:e},function(){1===e.success&&(t.props.redirectURL?window.location.replace(t.props.redirectURL):window.location.reload())})}})}},{key:"render",value:function(){var e=this.props.socialLogin,t=this.state,a=t.email,n=t.password,r=void 0;return Number.isInteger(this.state.message.success)&&(r=React.createElement(c,this.state.message)),React.createElement("dialog",{id:"login"},React.createElement("div",null,React.createElement("article",null,React.createElement("header",null,React.createElement("h3",{className:"form-lead"},(0,o.t)("Sign in to %s","Jane's Walk"))),React.createElement("form",{rel:"form",method:"post",onSubmit:this.handleSubmit},React.createElement("section",{dangerouslySetInnerHTML:{__html:e}}),React.createElement("section",null,React.createElement("h4",null,(0,o.t)("or, log-in using your email & password")),React.createElement("label",{htmlFor:"uEmail"},(0,o.t)("Email"),React.createElement("input",{type:"text",name:"uEmail",id:"uEmail",ref:"uEmail",value:a,onChange:this.handleChangeEmail,className:"ccm-input-text input-large"})),React.createElement("label",{htmlFor:"uPassword"},(0,o.t)("Password"),React.createElement("input",{type:"password",name:"uPassword",id:"uPassword",value:n,onChange:this.handleChangePassword,className:"ccm-input-text input-large"})),React.createElement("label",null,React.createElement("input",{type:"checkbox",name:"uMaintainLogin",checked:this.maintainLogin,onChange:this.handleChangeMaintainLogin})," ",(0,o.t)("Keep me signed in.")),React.createElement("a",{onClick:this.handleReset},(0,o.t)("Request a new password"))),React.createElement("footer",null,r,React.createElement("a",{href:CCM_REL+"/register?uEmail="+a},(0,o.t)("Register for a new account.")),React.createElement("input",{type:"submit",className:"btn ccm-input-submit",id:"submit",value:(0,o.t)("Go!")}))))))}}]),t}(React.Component);t["default"]=s}]);